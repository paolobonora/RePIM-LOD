@prefix map: <#> .
@prefix db: <> .
@prefix vocab: <vocab/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix d2rq: <http://www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/0.1#> .
@prefix jdbc: <http://d2rq.org/terms/jdbc/> .
@prefix corago: <http://corago.unibo.it/sm/> .
@prefix frbroo: <http://erlangen-crm.org/efrbroo/> .
@prefix crm: <http://erlangen-crm.org/current/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix xml: <http://www.w3.org/XML/1998/namespace/#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix d2r: <http://sites.wiwiss.fu-berlin.de/suhl/bizer/d2r-server/config.rdf#> .

# Realizzato da: Paolo Bonora
# Versione del: 15/04/2016

<> a d2r:Server;
  d2r:sparqlTimeout 0;
  d2r:pageTimeout 5;
 .

map:database a d2rq:Database;
	d2rq:jdbcDriver "sun.jdbc.odbc.JdbcOdbcDriver";
	d2rq:jdbcDSN "jdbc:odbc:CORAGO";
	.

# Gestione Responsabile (RESPONS)
# Classe E39_Actor 
map:Responsabile a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RESPONS/@@RESPONS.COD_RESP|urlify@@";
	d2rq:class crm:E39_Actor;
.	

# Classe E82_Actor_Appellation (ex RESPONS)
map:ActorAppellation a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RESPONS/@@RESPONS.COGNOME_R|urlify@@-@@RESPONS.NOME_R|urlify@@&@@RESPONS.COD_RESP|urlify@@";
	d2rq:class crm:E82_Actor_Appellation;
.

# Classe E55_Type_Title
map:PersonTypeTitle a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RESPONS/TITLE&@@RESPONS.COD_RESP|urlify@@";
	d2rq:condition "RESPONS.QUALIFICA <> ''";
	d2rq:class crm:E55_Type;
.

# Classe E55_Type_Gender
map:PersonTypeGender a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RESPONS/GENDER&@@RESPONS.COD_RESP|urlify@@";
	d2rq:condition "RESPONS.SESSO <> ''";
	d2rq:class crm:E55_Type;
.

# Classe C2_Actor_Role (E55_Type)
map:PersonTypeRole a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/RES&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'RES'";
	d2rq:class corago:C2_Actor_Role;
.

map:GenderTable a d2rq:TranslationTable;
    d2rq:translation [ d2rq:databaseValue "M"; d2rq:rdfValue "male"; ];
    d2rq:translation [ d2rq:databaseValue "F"; d2rq:rdfValue "female"; ];
    .

map:PersonTypeGender_label a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonTypeGender;
	d2rq:property foaf:gender;
	d2rq:datatype xsd:string;
	d2rq:condition "RESPONS.SESSO <> ''";
	d2rq:column "RESPONS.SESSO";
	d2rq:translateWith map:GenderTable;
.

map:PersonTypeTitle_label a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonTypeTitle;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:condition "RESPONS.QUALIFICA <> ''";
	d2rq:column "RESPONS.QUALIFICA";
.

map:PersonTypeRole_label a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonTypeRole;
	d2rq:property rdf:value;
	d2rq:datatype xsd:string;
	d2rq:condition "TADE.TADETIP = 'RES'";
	d2rq:column "TADE.TADEDA1";
.

map:PersonBirthDate_label a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonDateBR;
	d2rq:property rdfs:label;
	d2rq:condition "RESPONS.DATA_NAS_R <> ''";
	d2rq:column "RESPONS.DATA_NAS_R";
.


# Classe E52 Time-Span (per E39_Actor)
map:PersonBirthDateTS a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RESPONS/NAS/TS/@@RESPONS.COD_RESP|urlify@@";
	d2rq:condition "RESPONS.DATA_NAS_R <> ''";
	d2rq:class crm:E52_Time-Span;
.
map:PersonDeathDateTS a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RESPONS/MOR/TS/@@RESPONS.COD_RESP|urlify@@";
	d2rq:condition "RESPONS.DATA_MOR_R <> ''";
	d2rq:class crm:E52_Time-Span;
.
# Classe E67 Birth (per E39_Actor)
map:PersonBirthDate a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RESPONS/NAS/@@RESPONS.COD_RESP|urlify@@";
	d2rq:condition "RESPONS.DATA_NAS_R <> ''";
	d2rq:class crm:E67_Birth;
.
# Classe E69 Death (per E39_Actor)
map:PersonDeathDate a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RESPONS/MOR/@@RESPONS.COD_RESP|urlify@@";
	d2rq:condition "RESPONS.DATA_MOR_R <> ''";
	d2rq:class crm:E69_Death;
.

# Classe E50 Date (per E39_Actor)
map:PersonDateBR a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RESPONS/DATA/NAS/@@RESPONS.COD_RESP|urlify@@";
	d2rq:condition "RESPONS.DATA_NAS_R <> ''";
	d2rq:class crm:E50_Date;
.
map:PersonDateBRTA a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DATA/@@RESPONS.DATA_NAS_R|urlify@@";
	d2rq:condition "RESPONS.DATA_NAS_R <> ''";
	d2rq:class crm:E49_Time_Appellation;
.
map:PersonDateBRTALabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonDateBRTA;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "RESPONS.DATA_NAS_R";
.
map:PersonDateBRTAValue a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonDateBRTA;
	d2rq:property rdf:value;
	d2rq:datatype xsd:dateTime;
	d2rq:sqlExpression "Left(RESPONS.DATA_NAS_R,4)+'-01-01T00:00:00Z'";
	d2rq:condition "LEN(RESPONS.DATA_NAS_R)>0";
.

map:LegamePersonDateBRTA a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonDateBR;
	d2rq:property crm:P78_is_identified_by;
	d2rq:refersToClassMap map:PersonDateBRTA;
.
map:LegamePersonDateBRTS a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonBirthDateTS;
	d2rq:property crm:P78_is_identified_by;
	d2rq:refersToClassMap map:PersonDateBR;
.

map:PersonDateDT a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RESPONS/DATA/MOR/@@RESPONS.COD_RESP|urlify@@";
	d2rq:condition "RESPONS.DATA_MOR_R <> ''";
	d2rq:class crm:E50_Date;
.
map:PersonDateDTTA a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DATA/@@RESPONS.DATA_MOR_R|urlify@@";
	d2rq:condition "RESPONS.DATA_MOR_R <> ''";
	d2rq:class crm:E49_Time_Appellation;
.
map:PersonDateDTTALabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonDateDTTA;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "RESPONS.DATA_MOR_R";
.
map:PersonDateDTTAValue a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonDateDTTA;
	d2rq:property rdf:value;
	d2rq:datatype xsd:dateTime;
	d2rq:sqlExpression "Left(RESPONS.DATA_MOR_R,4)+'-01-01T00:00:00Z'";
	d2rq:condition "LEN(RESPONS.DATA_MOR_R)>0";
.
map:LegamePersonDateDTTA a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonDateDT;
	d2rq:property crm:P78_is_identified_by;
	d2rq:refersToClassMap map:PersonDateDTTA;
.
map:LegamePersonDateDTTS a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonDeathDateTS;
	d2rq:property crm:P78_is_identified_by;
	d2rq:refersToClassMap map:PersonDateDT;
.

# Gestione località nascita/morte
# F9_Place
map:LuogoNascitaResp a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RESPONS/LUOGO/NAS/@@RESPONS.COD_RESP|urlify@@";
	d2rq:condition "RESPONS.LOC_NAS_R <> ''";
	d2rq:class frbroo:F9_Place;
.
map:LuogoNascitaRespLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoNascitaResp;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "RESPONS.LOC_NAS_R";
.
map:LegameLuogoNascitaResp a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonBirthDate;
	d2rq:property crm:P7_took_place_at;
	d2rq:refersToClassMap map:LuogoNascitaResp;
.
# E44_Place_Appellation
map:LuogoNascitaRespPA a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LUOGO/@@RESPONS.LOC_NAS_R|urlify@@";
	d2rq:condition "RESPONS.LOC_NAS_R  <> ''";
	d2rq:class crm:E44_Place_Appellation;
.
map:LuogoNascitaRespPALabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoNascitaRespPA;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "RESPONS.LOC_NAS_R";
.
map:LegameLuogoNascitaRespPA a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoNascitaResp;
	d2rq:property crm:P1_is_identified_by;
	d2rq:refersToClassMap map:LuogoNascitaRespPA;
.

map:LuogoMorteResp a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RESPONS/LUOGO/MOR/@@RESPONS.COD_RESP|urlify@@";
	d2rq:condition "RESPONS.LOC_MOR_R <> ''";
	d2rq:class frbroo:F9_Place;
.
map:LuogoMorteRespLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoMorteResp;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "RESPONS.LOC_MOR_R";
.
map:LegameLuogoMorteResp a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonDeathDate;
	d2rq:property crm:P7_took_place_at;
	d2rq:refersToClassMap map:LuogoMorteResp;
.
# E44_Place_Appellation
map:LuogoMorteRespPA a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LUOGO/@@RESPONS.LOC_MOR_R|urlify@@";
	d2rq:condition "RESPONS.LOC_MOR_R  <> ''";
	d2rq:class crm:E44_Place_Appellation;
.
map:LuogoMorteRespPALabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoMorteRespPA;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "RESPONS.LOC_MOR_R";
.
map:LegameLuogoMorteRespPA a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoMorteResp;
	d2rq:property crm:P1_is_identified_by;
	d2rq:refersToClassMap map:LuogoMorteRespPA;
.

# Proprietà di E39_Actor (e classi collegate)

map:ActorAppellation_label a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:ActorAppellation;
	d2rq:property rdfs:label;
	d2rq:pattern "@@RESPONS.NOME_R@@ @@RESPONS.COGNOME_R@@";
.

map:PersonTypeTitleP2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Responsabile;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:PersonTypeTitle;
	d2rq:condition "RESPONS.QUALIFICA <> ''";
.

map:PersonTypeGenderP2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Responsabile;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:PersonTypeGender;
	d2rq:condition "RESPONS.SESSO <> ''";
.

map:Responsabile_Appellation a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Responsabile;
	d2rq:property crm:P131_is_identified_by;
	d2rq:uriPattern "RESPONS/@@RESPONS.COGNOME_R|urlify@@-@@RESPONS.NOME_R|urlify@@-@@RESPONS.COD_RESP|urlify@@";
.

# Responsabile_PersonBirthDate
map:Responsabile_PersonBirthDate a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Responsabile;
	d2rq:property crm:P98i_was_born;
	d2rq:condition "RESPONS.DATA_NAS_R <> ''";
	d2rq:refersToClassMap map:PersonBirthDate;
.
map:Responsabile_PersonBirthDateTS a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonBirthDate;
	d2rq:property crm:P4_has_time-span;
	d2rq:condition "RESPONS.DATA_NAS_R <> ''";
	d2rq:refersToClassMap map:PersonBirthDateTS;
.

# Responsabile_PersonDeathDate
map:Responsabile_PersonDeathDate a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Responsabile;
	d2rq:property crm:P100i_died_in;
	d2rq:condition "RESPONS.DATA_MOR_R <> ''";
	d2rq:refersToClassMap map:PersonDeathDate;
.

map:Responsabile_PersonDeathDateTS a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonDeathDate;
	d2rq:property crm:P4_has_time-span;
	d2rq:condition "RESPONS.DATA_MOR_R <> ''";
	d2rq:refersToClassMap map:PersonDeathDateTS;
.


map:Responsabile_Cognome a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Responsabile;
	d2rq:property rdfs:label;
	d2rq:pattern "@@RESPONS.COGNOME_R@@, @@RESPONS.NOME_R@@";
.

# mapping provvisorio repsons->RES->tade
map:PersonTypeRole_rel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Responsabile;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:PersonTypeRole;
	d2rq:join "RESPONS.COD_TIPO_R = TADE.TADEPRO";
	d2rq:condition "TADE.TADETIP = 'RES'";
.


# Gestione Brani (BRANI)
# Classe Brano a livello F1_Work
map:Brano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BRANI/@@BRANI.COD_BRANO|urlify@@";
.	

# Gestione del polimorfismo per la classe Brano a livello F1_Work
map:BranoType a d2rq:PropertyBridge;
    d2rq:property rdf:type;
	d2rq:uriColumn "BRANI.TIPO_BRANO";
    d2rq:translateWith map:BranoTypeTable;
    d2rq:belongsToClassMap map:Brano
.
# Configurazione switch polimorfismo a livello F1_Work
map:BranoTypeTable a d2rq:TranslationTable;
    d2rq:translation [ d2rq:databaseValue "1CO"; d2rq:rdfValue frbroo:F15_Complex_Work; ];
    d2rq:translation [ d2rq:databaseValue "2SE"; d2rq:rdfValue frbroo:F17_Aggregation_Work; ];
    d2rq:translation [ d2rq:databaseValue "3SM"; d2rq:rdfValue frbroo:F17_Aggregation_Work; ];
	d2rq:translation [ d2rq:databaseValue "4AT"; d2rq:rdfValue frbroo:F14_Individual_Work; ];
	d2rq:translation [ d2rq:databaseValue "5FR"; d2rq:rdfValue frbroo:F14_Individual_Work; ];
	d2rq:translation [ d2rq:databaseValue "6PS"; d2rq:rdfValue frbroo:F14_Individual_Work; ];
.

# Classe EspressioneBrano a livello F2_Expression: vengono create solo istanze prive di corrispettivi in SPET_BRA
# ATTENZIONE: l'outer join non è esprimibile e la non esistenza va in timeout
map:EspressioneBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BRANI/@@BRANI.COD_BRANO|urlify@@_EX";
	#d2rq:join "BRANI.COD_BRANO => SPET_BRA.COD_BRANO";
	#d2rq:join "BRANI.COD_BRANO = BRANI.COD_BRANO";
	#d2rq:condition "NOT EXISTS (SELECT SPET_BRA.COD_BRANO FROM SPET_BRA)";
.
# Gestione del polimorfismo per la classe EspressioneBrano a livello F2_Expression
map:EspressioneBranoType a d2rq:PropertyBridge;
    d2rq:property rdf:type;
	d2rq:uriColumn "BRANI.TIPO_BRANO";
    d2rq:translateWith map:EspressioneBranoTypeTable;
    d2rq:belongsToClassMap map:EspressioneBrano
.

# Configurazione switch polimorfismo a livello F2_Expression
map:EspressioneBranoTypeTable a d2rq:TranslationTable;
    d2rq:translation [ d2rq:databaseValue "1CO"; d2rq:rdfValue frbroo:F22_Self-Contained_Expression; ];
    d2rq:translation [ d2rq:databaseValue "2SE"; d2rq:rdfValue frbroo:F22_Self-Contained_Expression; ];
    d2rq:translation [ d2rq:databaseValue "3SM"; d2rq:rdfValue frbroo:F22_Self-Contained_Expression; ];
	d2rq:translation [ d2rq:databaseValue "4AT"; d2rq:rdfValue frbroo:F23_Expression_Fragment; ];
	d2rq:translation [ d2rq:databaseValue "5FR"; d2rq:rdfValue frbroo:F23_Expression_Fragment; ];
	d2rq:translation [ d2rq:databaseValue "6PS"; d2rq:rdfValue frbroo:F22_Self-Contained_Expression; ];
.
		
# Classe PianoBrano a livello F25_Performance_Plan (SPET_BRA)
# Viene creata una sola istanza per ID_SPET
map:PianoBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPET_BRA/@@SPET_BRA.ID_SPET|urlify@@";
	d2rq:condition "SPET_BRA.ID_SPET <> ''";
	d2rq:condition "SPET_BRA.COD_BRANO <> ''";
	d2rq:join "SPETTACOLI.ID_SPET => SPET_BRA.ID_SPET";
	d2rq:class frbroo:F25_Performance_Plan;
.
# Creazione relazione tra F1_Work e F25_Performance_Plan
map:RealizzazioneBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property frbroo:R9_is_realised_in;
	d2rq:uriPattern "SPET_BRA/@@SPET_BRA.ID_SPET|urlify@@";
	d2rq:join "BRANI.COD_BRANO => SPET_BRA.COD_BRANO";
.
# Responsabili di F25_Performance_Plan
# Introduzione evento di creazione di F25_Performance_Plan
map:CreazionePianoBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPET_BRA/EVE/@@SPET_BRA.ID_SPET_BRA|urlify@@";
	d2rq:condition "SPET_BRA.ID_SPET <> ''";
	d2rq:condition "SPET_BRA.COD_BRANO <> ''";
	d2rq:class frbroo:F28_Expression_Creation;
.
map:CreazionePianoBranoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:CreazionePianoBrano;
	d2rq:property rdfs:label;
	d2rq:column "SPET_BRA.TIT_NOR";
.

map:CreazionePianoBranoLegame a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:CreazionePianoBrano;
	d2rq:property frbroo:R17_created;
	d2rq:uriPattern "SPET_BRA/@@SPET_BRA.ID_SPET|urlify@@";
	d2rq:join "SPET_BRA_RB.ID_SPET_BRA => SPET_BRA.ID_SPET_BRA";
.

map:PianoBranoNote a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPET_BRA/NOTE/@@SPET_BRA.ID_SPET|urlify@@";
	d2rq:condition "SPET_BRA.SB_NOTE <> ''";
	d2rq:class crm:E62_String;
.
map:PianoBranoNoteLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PianoBranoNote;
	d2rq:property rdfs:label;
	d2rq:column "SPET_BRA.SB_NOTE";
.
map:LegamePianoBranoNote a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PianoBrano;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:PianoBranoNote;
	#d2rq:join "SPET_BRA.SB_NOTE = SPET_BRA.SB_NOTE";
.

map:PianoBranoTipo a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPET_BRA/FORMA/@@SPET_BRA.ID_SPET|urlify@@";
	d2rq:condition "SPET_BRA.FORMA <> ''";
	d2rq:class crm:E55_Type;
.
map:PianoBranoTipoValue a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PianoBranoTipo;
	d2rq:property rdf:value;
	d2rq:datatype xsd:string;
	d2rq:column "SPET_BRA.FORMA";
.
map:PianoBranoTipoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PianoBranoTipo;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "SPET_BRA.FORMA";
.
map:LegamePianoBranoTipo a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PianoBrano;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:PianoBranoTipo;
	d2rq:join "SPET_BRA.FORMA = SPET_BRA.FORMA";
.

# Aggancio Responsabile via SPET_BRA_RB con C2_Actor_Role
map:RuoloCreazionePianoBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPET_BRA_RB/@@SPET_BRA_RB.ID_BRA_RB|urlify@@";
	d2rq:condition "SPET_BRA_RB.ID_SPET_BRA <> ''";
	d2rq:condition "SPET_BRA_RB.COD_BRANO <> ''";
	d2rq:class corago:C2_Actor_Role;
.
map:RuoloCreazionePianoBranoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloCreazionePianoBrano;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:join "SPET_BRA_RB.COD_TIPO_R = TADE.ID_TADE";
	d2rq:column "TADE.TADEDA1";
.
map:RuoloCreazionePianoBranoP1 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:CreazionePianoBrano;
	d2rq:refersToClassMap map:RuoloCreazionePianoBrano;
	d2rq:join "SPET_BRA_RB.ID_SPET_BRA => SPET_BRA.ID_SPET_BRA";
	d2rq:property corago:CP2_carried_out_role;
.
map:RuoloCreazionePianoBranoP2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloCreazionePianoBrano;
	d2rq:refersToClassMap map:Responsabile;
	d2rq:property corago:CP3_carried_out_actor;
	d2rq:join "SPET_BRA_RB.COD_RESP = RESPONS.COD_RESP";
.
# Gestione Titoli PianoBrano (SPET_BRA_TIT)
map:TitoloPianoBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TITOLI/SPET_BRA_TIT/@@SPET_BRA_TIT.ID_SPET_BRA|urlify@@/@@SPET_BRA_TIT.NPRO|urlify@@";
	d2rq:join "SPET_BRA.ID_SPET_BRA = SPET_BRA_TIT.ID_SPET_BRA";
	d2rq:class crm:E35_Title;
.
map:TitoloPianoBranoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloPianoBrano;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "SPET_BRA_TIT.TIT_NOR";
.
map:TitoloPianoBranoLingua a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloPianoBrano;
	d2rq:property xml:lang;
	d2rq:datatype xsd:string;
	d2rq:join "SPET_BRA_TIT.LINGUA_TIT = TADE.ID_TADE";
	d2rq:condition "TADE.TADETIP = 'LIN'";
	d2rq:column "TADE.TADEPRO";
.
map:TitoloPianoBranoOrdinale a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TITOLI/SPET_BRA_TIT/@@SPET_BRA_TIT.NPRO|urlify@@";
	d2rq:class crm:E60_Number;
.
map:TitoloPianoBranoOrdinaleLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloPianoBranoOrdinale;
	d2rq:property rdfs:label;
	d2rq:column "SPET_BRA_TIT.NPRO";
.
map:LegameTitoloPianoBranoOrdinale a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloPianoBrano;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:TitoloPianoBranoOrdinale;
	d2rq:join "SPET_BRA_TIT.NPRO = SPET_BRA_TIT.NPRO";
.
map:LegameTitoloPianoBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PianoBrano;
	d2rq:property crm:P102_has_title;
	d2rq:refersToClassMap map:TitoloPianoBrano;
	d2rq:join "SPET_BRA.ID_SPET_BRA = SPET_BRA_TIT.ID_SPET_BRA";
.

map:LegameTitoloBranoTipoSpetBra a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloPianoBrano;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:BranoTitoloTipo;
	d2rq:join "SPET_BRA_TIT.TIPO_TIT = TADE.ID_TADE";
.

# Classe Spettacolo a livello F31_Performance 
map:Spettacolo a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPETTACOLI/@@SPETTACOLI.ID_SPET|urlify@@";
	d2rq:condition "SPETTACOLI.ID_SPET <> ''";
	d2rq:class frbroo:F31_Performance;
.
# Creazione relazione tra F25_Performance_Plan e F31_Performance
map:PerformancePiano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Spettacolo;
	d2rq:property frbroo:R25_performed;
	d2rq:refersToClassMap map:PianoBrano;
	#d2rq:uriPattern "SPETTACOLI/@@SPETTACOLI.ID_SPET|urlify@@";
	d2rq:join "SPETTACOLI.ID_SPET => SPET_BRA.ID_SPET";
.
# Attributi Classe F31_Performance (Spettacoli)
# E35_Title per F31_Performance
map:TitoloSpettacolo a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TITOLI/@@TITOLI.TABELLA@@&@@TITOLI.NOME_CAMPO@@&@@TITOLI.ID_SPET|urlify@@";
	d2rq:condition "TITOLI.TABELLA = 'SPETTACOLI'";
	d2rq:condition "TITOLI.ID_SPET <> ''";
	d2rq:class crm:E35_Title;
.
map:TitoloSpettLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloSpettacolo;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "TITOLI.TITOLO";
.
map:LinguaTitoloSpett a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloSpettacolo;
	d2rq:property xml:lang;
	d2rq:datatype xsd:string;
	d2rq:join "TITOLI.LINGUA = TADE.ID_TADE";
	d2rq:condition "TADE.TADETIP = 'LIN'";
	d2rq:column "TADE.TADEPRO";
.
map:LegameTitoloSpett a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Spettacolo;
	d2rq:property crm:P102_has_title;
	d2rq:refersToClassMap map:TitoloSpettacolo;
	d2rq:join "SPETTACOLI.ID_SPET = TITOLI.ID_SPET";
.
# F9_Place
map:LuogoSpettacolo a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPETTACOLI/LUOGO/@@SPETTACOLI.ID_SPET|urlify@@";
	d2rq:condition "SPETTACOLI.LUOGO <> ''";
	d2rq:class frbroo:F9_Place;
.
map:LuogoSpettacoloLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoSpettacolo;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "SPETTACOLI.LUOGO";
.
map:LegameLuogoSpettacolo a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Spettacolo;
	d2rq:property crm:P7_took_place_at;
	d2rq:refersToClassMap map:LuogoSpettacolo;
.
# E44_Place_Appellation
map:LuogoSpettacoloPA a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LUOGO/@@SPETTACOLI.LUOGO|urlify@@";
	d2rq:condition "SPETTACOLI.LUOGO <> ''";
	d2rq:class crm:E44_Place_Appellation;
.
map:LuogoSpettacoloPALabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoSpettacoloPA;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "SPETTACOLI.LUOGO";
.
map:LegameLuogoSpettacoloPA a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoSpettacolo;
	d2rq:property crm:P1_is_identified_by;
	d2rq:refersToClassMap map:LuogoSpettacoloPA;
.
# E52_Time-Span
map:DataSpettacolo a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPETTACOLI/DATA/@@SPETTACOLI.DATA|urlify@@@@";
	d2rq:condition "SPETTACOLI.DATA <> ''";
	d2rq:class crm:E52_Time-Span;
.
map:DataSpettacoloLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DataSpettacolo;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "SPETTACOLI.DATA";
.
map:LegameDataSpettacolo a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Spettacolo;
	d2rq:property crm:P4_has_time-span;
	d2rq:refersToClassMap map:DataSpettacolo;
.
map:DataSpettacoloTA a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DATA/@@SPETTACOLI.DATA|urlify@@";
	d2rq:condition "SPETTACOLI.DATA <> ''";
	d2rq:class crm:E49_Time_Appellation;
.
map:DataSpettacoloTALabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DataSpettacoloTA;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "SPETTACOLI.DATA";
.
map:DataSpettacoloTAValue a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DataSpettacoloTA;
	d2rq:property rdf:value;
	d2rq:datatype xsd:dateTime;
	d2rq:sqlExpression "Left(SPETTACOLI.DATA,4)+'-01-01T00:00:00Z'";
	d2rq:condition "LEN(SPETTACOLI.DATA)>0";
.
map:LegameDataSpettacoloTA a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DataSpettacolo;
	d2rq:property crm:P78_is_identified_by;
	d2rq:refersToClassMap map:DataSpettacoloTA;
.


# E19_Physical_object (EDIFICIO)
map:EdificioSpettacolo a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPETTACOLI/EDIFICIO/@@SPETTACOLI.EDIFICIO|urlify@@";
	d2rq:condition "SPETTACOLI.EDIFICIO <> ''";
	d2rq:class crm:E19_Physical_object;
.
map:EdificioSpettacoloLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EdificioSpettacolo;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "SPETTACOLI.EDIFICIO";
.
map:LegameEdificioSpettacolo a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Spettacolo;
	d2rq:property crm:P8_took_place_on_or_within;
	d2rq:refersToClassMap map:EdificioSpettacolo;
.
# Vari E55_Type
map:TipoEvento a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/EVN&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'EVN'";
	d2rq:class corago:E55_Type;
.
map:TipoEventoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TipoEvento;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "TADE.TADEDA1";
.
map:LegameTipoEvento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Spettacolo;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:TipoEvento;
	d2rq:join "SPETTACOLI.TIPO_EVENTO = TADE.ID_TADE";
.
map:TipoProduzione a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/TPP&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'TPP'";
	d2rq:class corago:E55_Type;
.
map:TipoProduzioneLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TipoProduzione;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "TADE.TADEDA1";
.
map:TipoProduzioneEvento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Spettacolo;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:TipoProduzione;
	d2rq:join "SPETTACOLI.TIPO_PROD = TADE.ID_TADE";
.

map:TipoAllestimentoEvento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Spettacolo;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:ProductionRelease;
	d2rq:join "SPETTACOLI.TIPO_ALL = TADE.ID_TADE";
.
map:TipoOccasione a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/OCC&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'OCC'";
	d2rq:class corago:E55_Type;
.
map:TipoOccasioneLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TipoOccasione;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "TADE.TADEDA1";
.
map:TipoOccasioneEvento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Spettacolo;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:TipoOccasione;
	d2rq:join "SPETTACOLI.OCCASIONE = TADE.ID_TADE";
.

map:NoteSpettacolo a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPETTACOLI/NOTE/@@SPETTACOLI.ID_SPET|urlify@@";
	d2rq:condition "SPETTACOLI.SPET_NOTE <> ''";
	d2rq:class crm:E62_String;
.
map:NoteSpettacoloLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:NoteSpettacolo;
	d2rq:property rdfs:label;
	d2rq:column "SPETTACOLI.SPET_NOTE";
.
map:LegameNoteSpettacolo a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Spettacolo;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:NoteSpettacolo;
	d2rq:join "SPETTACOLI.SPET_NOTE = SPETTACOLI.SPET_NOTE";
.

# Gestione E39_Actor per Spettacolo
# Aggancio Responsabile via SPET_BRA_CAN con C2_Actor_Role
map:RuoloSpettacolo a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPET_BRA_CAN/@@SPET_BRA_CAN.ID_BRA_CAN|urlify@@";
	d2rq:condition "SPET_BRA_CAN.ID_SPET_BRA <> ''";
	#d2rq:condition "SPET_BRA_CAN.COD_BRANO <> ''";
	d2rq:condition "SPET_BRA_CAN.COD_RESP <> 'NON INDICATO'";
	d2rq:class corago:C2_Actor_Role;
.
map:RuoloSpettacoloLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacolo;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:join "SPET_BRA_CAN.RUOLO = TADE.ID_TADE";
	d2rq:column "TADE.TADEDA1";
.
map:RuoloSpettacoloP1 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Spettacolo;
	#d2rq:refersToClassMap map:RuoloSpettacolo;
	d2rq:join "SPETTACOLI.ID_SPET = SPET_BRA.ID_SPET";
	d2rq:join "SPET_BRA_CAN.ID_SPET_BRA = SPET_BRA.ID_SPET_BRA";
	d2rq:uriPattern "SPET_BRA_CAN/@@SPET_BRA_CAN.ID_BRA_CAN|urlify@@";
	d2rq:condition "SPET_BRA_CAN.COD_RESP <> 'NON INDICATO'";
	d2rq:property corago:CP2_carried_out_role;
.
map:RuoloSpettacoloP2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacolo;
	d2rq:refersToClassMap map:Responsabile;
	d2rq:property corago:CP3_carried_out_actor;
	d2rq:join "SPET_BRA_CAN.COD_RESP = RESPONS.COD_RESP";
.
map:RuoloSpettacoloBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacolo;
	d2rq:refersToClassMap map:Brano;
	d2rq:property corago:CP7_performed_part;
	d2rq:join "SPET_BRA_CAN.COD_BRANO = BRANI.COD_BRANO";
.
#Gestiamo il nome in fonte come nota del ruolo per non perdere l'aggancio con la relazione con lo spettacolo
map:RuoloSpettacoloAutNote a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPET_BRA_CAN/NOME_OR/@@SPET_BRA_CAN.ID_BRA_CAN|urlify@@";
	d2rq:condition "SPET_BRA_CAN.NOME_OR <> ''";
	d2rq:class crm:E62_String;
.
map:RuoloSpettacoloAutNoteLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacoloAutNote;
	d2rq:property rdfs:label;
	d2rq:column "SPET_BRA_CAN.NOME_OR";
.
map:LegameRuoloSpettacoloAutNote a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacolo;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:RuoloSpettacoloAutNote;
	d2rq:join "SPET_BRA_CAN.NOME_OR = SPET_BRA_CAN.NOME_OR";
.

map:RuoloSpettacoloPerNote a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPET_BRA_CAN/PER_NOME/@@SPET_BRA_CAN.ID_BRA_CAN|urlify@@";
	d2rq:condition "SPET_BRA_CAN.PER_NOME <> ''";
	d2rq:class crm:E62_String;
.
map:RuoloSpettacoloPerNoteLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacoloPerNote;
	d2rq:property rdfs:label;
	d2rq:column "SPET_BRA_CAN.PER_NOME";
.
map:LegameRuoloSpettacoloPerNote a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacolo;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:RuoloSpettacoloPerNote;
	d2rq:join "SPET_BRA_CAN.PER_NOME = SPET_BRA_CAN.PER_NOME";
.

map:RuoloSpettacoloQualNote a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPET_BRA_CAN/PER_QUAL/@@SPET_BRA_CAN.ID_BRA_CAN|urlify@@";
	d2rq:condition "SPET_BRA_CAN.PER_QUAL <> ''";
	d2rq:class crm:E62_String;
.
map:RuoloSpettacoloQualNoteLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacoloQualNote;
	d2rq:property rdfs:label;
	d2rq:column "SPET_BRA_CAN.PER_QUAL";
.
map:LegameRuoloSpettacoloQualNote a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacolo;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:RuoloSpettacoloQualNote;
	d2rq:join "SPET_BRA_CAN.PER_QUAL = SPET_BRA_CAN.PER_QUAL";
.

map:RuoloSpettacoloRuolNote a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPET_BRA_CAN/RUOLO_STO/@@SPET_BRA_CAN.ID_BRA_CAN|urlify@@";
	d2rq:condition "SPET_BRA_CAN.RUOLO_STO <> ''";
	d2rq:class crm:E62_String;
.
map:RuoloSpettacoloRuolNoteLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacoloRuolNote;
	d2rq:property rdfs:label;
	d2rq:column "SPET_BRA_CAN.RUOLO_STO";
.
map:LegameRuoloSpettacoloRuolNote a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacolo;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:RuoloSpettacoloRuolNote;
	d2rq:join "SPET_BRA_CAN.RUOLO_STO = SPET_BRA_CAN.RUOLO_STO";
.


# Aggancio Responsabile via SPET_RES1 con C2_Actor_Role
map:RuoloSpettacolo1 a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPET_RES1/@@SPET_RES1.ID_SPET_RES1|urlify@@";
	d2rq:condition "SPET_RES1.ID_SPET <> ''";
	#d2rq:condition "SPET_RES1.COD_RESP <> ''";
	d2rq:class corago:C2_Actor_Role;
.
map:RuoloSpettacolo1Label a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacolo1;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:join "SPET_RES1.COD_TIPO_R = TADE.ID_TADE";
	d2rq:column "TADE.TADEDA1";
.
map:RuoloSpettacolo1P1 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Spettacolo;
	#d2rq:refersToClassMap map:RuoloSpettacolo;
	d2rq:join "SPETTACOLI.ID_SPET = SPET_RES1.ID_SPET";
	d2rq:uriPattern "SPET_RES1/@@SPET_RES1.ID_SPET_RES1|urlify@@";
	d2rq:property corago:CP2_carried_out_role;
.
map:RuoloSpettacolo1P2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacolo1;
	d2rq:refersToClassMap map:Responsabile;
	d2rq:property corago:CP3_carried_out_actor;
	d2rq:join "SPET_RES1.COD_RESP = RESPONS.COD_RESP";
.

map:RuoloSpettacolo1Note a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SPET_RES1/NOTE/@@SPET_RES1.ID_SPET_RES1|urlify@@";
	d2rq:condition "SPET_RES1.NOTE_REV <> ''";
	d2rq:class crm:E62_String;
.
map:RuoloSpettacolo1NoteLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacolo1Note;
	d2rq:property rdfs:label;
	d2rq:column "SPET_RES1.NOTE_REV";
.
map:LegameRuoloSpettacolo1Note a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacolo1;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:RuoloSpettacolo1Note;
	d2rq:join "SPET_RES1.NOTE_REV = SPET_RES1.NOTE_REV";
.

##FINE F31_Performance

# E35_Title per F22_Self-Contained_Expression
map:TitoloBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TITOLI/@@TITOLI.TABELLA@@&@@TITOLI.NOME_CAMPO@@&@@TITOLI.COD_BRANO|urlify@@";
	d2rq:condition "TITOLI.TABELLA = 'BRANI'";
	d2rq:condition "TITOLI.COD_BRANO <> ''";
	d2rq:class crm:E35_Title;
.

map:TitoloLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloBrano;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "TITOLI.TITOLO";
.	

map:LinguaTitoloBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloBrano;
	d2rq:property xml:lang;
	d2rq:datatype xsd:string;
	d2rq:join "TITOLI.LINGUA = TADE.ID_TADE";
	d2rq:condition "TADE.TADETIP = 'LIN'";
	d2rq:column "TADE.TADEPRO";
.


# Proprietà di BRANO

map:Titolo a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property rdfs:label;
	d2rq:column "BRANI.TITOLO_B";
.	
# E35_Title per F1_Work (BRA_TIT)
map:TitoloBranoAltro a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TITOLI/BRA_TIT/@@BRA_TIT.COD_BRANO@@/@@BRA_TIT.NPRO|urlify@@";
	d2rq:join "BRANI.COD_BRANO = BRA_TIT.COD_BRANO";
	d2rq:class crm:E35_Title;
.
map:TitoloBranoAltroLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloBranoAltro;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "BRA_TIT.TIT_NOR";
.
map:TitoloBranoAltroLingua a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloBranoAltro;
	d2rq:property xml:lang;
	d2rq:datatype xsd:string;
	d2rq:join "BRA_TIT.LINGUA_TIT = TADE.ID_TADE";
	d2rq:condition "TADE.TADETIP = 'LIN'";
	d2rq:column "TADE.TADEPRO";
.
map:TitoloBranoOrdinale a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TITOLI/BRA_TIT/@@BRA_TIT.NPRO|urlify@@";
	d2rq:class crm:E60_Number;
.
map:TitoloBranoOrdinaleLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloBranoOrdinale;
	d2rq:property rdfs:label;
	d2rq:column "BRA_TIT.NPRO";
.
map:LegameTitoloBranoOrdinale a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloBranoAltro;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:TitoloBranoOrdinale;
	d2rq:join "BRA_TIT.NPRO = BRA_TIT.NPRO";
.
map:LegameTitoloBranoAltro a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property crm:P102_has_title;
	d2rq:refersToClassMap map:TitoloBranoAltro;
	d2rq:join "BRANI.COD_BRANO = BRA_TIT.COD_BRANO";
.
map:BranoTitoloTipo a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/TIT&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'TIT'";
	d2rq:class crm:E55_Type;
.
map:BranoTitoloTipoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:BranoTitoloTipo;
	d2rq:property rdf:value;
	d2rq:datatype xsd:string;
	d2rq:condition "TADE.TADETIP = 'TIT'";
	d2rq:column "TADE.TADEDA1";
.
map:LegameTitoloBranoTipo a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloBranoAltro;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:BranoTitoloTipo;
	d2rq:join "BRA_TIT.TIPO_TIT = TADE.ID_TADE";
.

#Titolo ricavato direttamente da TITOLI per i Brani che non hanno record in BRA_TIT
map:LegameTitoloBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property crm:P102_has_title;
	d2rq:refersToClassMap map:TitoloBrano;
	d2rq:join "BRANI.COD_BRANO = TITOLI.COD_BRANO";
.


# Classe C3_Genre (E55_Type)
map:Genere a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/GEN&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'GEN'";
	d2rq:class corago:C3_Genre;
.

map:GenereBrano_value a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Genere;
	d2rq:property rdf:value;
	d2rq:datatype xsd:string;
	d2rq:condition "TADE.TADETIP = 'GEN'";
	d2rq:column "TADE.TADEDA1";
.

map:LegameGenereBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:Genere;
	d2rq:join "BRANI.GENERE = TADE.ID_TADE";
	d2rq:condition "TADE.TADETIP = 'GEN'";
.

# Classe C9_Production_Release (E55_Type)
map:ProductionRelease a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/TAL&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'TAL'";
	d2rq:class corago:C9_Production_Release;
.

map:ProductionRelease_value a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:ProductionRelease;
	d2rq:property rdf:value;
	d2rq:datatype xsd:string;
	d2rq:condition "TADE.TADETIP = 'TAL'";
	d2rq:column "TADE.TADEDA1";
.

# Classe C4_Codified_Genre (E55_Type)
map:GenereCod a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/GNC&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'GNC'";
	d2rq:class corago:C4_Codified_Genre;
.

map:GenereCodBrano_value a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:GenereCod;
	d2rq:property rdf:value;
	d2rq:datatype xsd:string;
	d2rq:condition "TADE.TADETIP = 'GNC'";
	d2rq:column "TADE.TADEDA1";
.

map:LegameGenereCodBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:GenereCod;
	d2rq:join "BRANI.GENERE_COD = TADE.ID_TADE";
	d2rq:condition "TADE.TADETIP = 'GNC'";
.

map:GenereOrig a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BRANI/GENORIG&@@BRANI.COD_BRANO|urlify@@";
	d2rq:condition "BRANI.GENERE_ORIG <> ''";
	d2rq:class crm:E55_Type;
.

map:GenereOrigLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:GenereOrig;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:condition "BRANI.GENERE_ORIG <> ''";
	d2rq:column "BRANI.GENERE_ORIG";
.

map:LegameGenereOrigBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:GenereOrig;
	d2rq:condition "BRANI.GENERE_ORIG <> ''";
.

# Responsabilità da BRANI (F27_Work_Conception)
map:ConcezioneBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BRANI/CON&@@BRANI.COD_BRANO|urlify@@";
	d2rq:condition "BRANI.COD_RESP <> ''";
	d2rq:class frbroo:F27_Work_Conception;
.

map:LegameConcezioneBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property frbroo:R16i_was_initiated_by;
	d2rq:uriPattern "BRANI/CON&@@BRANI.COD_BRANO|urlify@@";
	d2rq:condition "BRANI.COD_RESP <> ''";
.

map:RuoloRespBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BRA_AUT/&@@BRA_AUT.ID_BRA_AUT|urlify@@";
	d2rq:join "BRANI.COD_BRANO = BRA_AUT.COD_BRANO";
	d2rq:class corago:C2_Actor_Role;
.
map:RuoloRespBranoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloRespBrano;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:join "BRA_AUT.TIPO_R = TADE.ID_TADE";
	d2rq:column "TADE.TADEDA1";
.
map:RuoloRespBranoP1 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:ConcezioneBrano;
	d2rq:refersToClassMap map:RuoloRespBrano;
	d2rq:join "BRANI.COD_BRANO = BRA_AUT.COD_BRANO";
	d2rq:property corago:CP2_carried_out_role;
.
map:RuoloRespBranoP2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloRespBrano;
	d2rq:refersToClassMap map:Responsabile;
	d2rq:property corago:CP3_carried_out_actor;
	d2rq:join "BRA_AUT.COD_RESP = RESPONS.COD_RESP";
.

map:CPBC1_work_author a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:refersToClassMap  map:Responsabile;
	d2rq:property corago:CPBC1_work_author;
	d2rq:join "BRANI.COD_BRANO = BRA_AUT.COD_BRANO";
	d2rq:join "BRA_AUT.COD_RESP = RESPONS.COD_RESP";
.

# Aggiungere per F27_Work_Conception: P4, P7, P8 per tutti i Brani privi di ID_SPET, altrimenti viene creata una relazione CP9_first_performed_in
# E52_Time-Span
map:DataConcezioneBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BRANI/DATA/@@BRANI.ANNO_COMP|urlify@@";
	d2rq:condition "BRANI.ANNO_COMP <> ''";
	d2rq:class crm:E52_Time-Span;
.
map:DConcezioneBranoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DataConcezioneBrano;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "BRANI.ANNO_COMP";
.
map:LegameDataConcezioneBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:ConcezioneBrano;
	d2rq:property crm:P4_has_time-span;
	d2rq:refersToClassMap map:DataConcezioneBrano;
	#d2rq:uriPattern "BRANI/CON&@@BRANI.COD_BRANO|urlify@@";
	d2rq:join "BRANI.ANNO_COMP = BRANI.ANNO_COMP";
.
map:DataConcezioneBranoTA a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DATA/@@BRANI.ANNO_COMP|urlify@@";
	d2rq:condition "BRANI.ANNO_COMP <> ''";
	d2rq:class crm:E49_Time_Appellation;
.
map:DataConcezioneBranoTALabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DataConcezioneBranoTA;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "BRANI.ANNO_COMP";
.
map:DataConcezioneBranoTAValue a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DataConcezioneBranoTA;
	d2rq:property rdf:value;
	d2rq:datatype xsd:dateTime;
	d2rq:sqlExpression "Left(BRANI.ANNO_COMP,4)+'-01-01T00:00:00Z'";
	d2rq:condition "LEN(BRANI.ANNO_COMP)>0";
.
map:LegameDataConcezioneBranoTA a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DataConcezioneBrano;
	d2rq:property crm:P78_is_identified_by;
	d2rq:refersToClassMap map:DataConcezioneBranoTA;
.
# F9_Place
map:LuogoConcezioneBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BRANI/LUOGO/@@BRANI.LOC_1ESEC|urlify@@";
	d2rq:condition "BRANI.LOC_1ESEC <> '' AND BRANI.ID_SPET = ''";
	d2rq:class frbroo:F9_Place;
.
map:LuogoConcezioneBranoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoConcezioneBrano;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "BRANI.LOC_1ESEC";
.
map:LegameLuogoConcezioneBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:ConcezioneBrano;
	d2rq:property crm:P7_took_place_at;
	d2rq:refersToClassMap map:LuogoConcezioneBrano;
.

# E19_Physical_object (EDIFICIO)
map:EdificioConcezioneBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BRANI/EDIFICIO/@@BRANI.EDIF_1ESEC|urlify@@";
	d2rq:condition "BRANI.EDIF_1ESEC <> '' AND BRANI.ID_SPET = ''";
	d2rq:class crm:E19_Physical_object;
.
map:EdificioConcezioneBranoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EdificioConcezioneBrano;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "BRANI.EDIF_1ESEC";
.
map:LegameEdificioConcezioneBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:ConcezioneBrano;
	d2rq:property crm:P8_took_place_on_or_within;
	d2rq:refersToClassMap map:EdificioConcezioneBrano;
.

# Proprietà di BRANO
map:CoriBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BRANI/CORI/@@BRANI.COD_BRANO|urlify@@";
	d2rq:condition "BRANI.CORI <> ''";
	d2rq:class crm:E62_String;
.
map:CoriBranoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:CoriBrano;
	d2rq:property rdfs:label;
	d2rq:column "BRANI.CORI";
.
map:LegameCoriBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:CoriBrano;
	d2rq:join "BRANI.CORI = BRANI.CORI";
.

map:AmbientazioneBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BRANI/AMBIENTAZIONE/@@BRANI.COD_BRANO|urlify@@";
	d2rq:condition "BRANI.AMBIENTAZIONE <> ''";
	d2rq:class crm:E62_String;
.
map:AmbientazioneBranoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:AmbientazioneBrano;
	d2rq:property rdfs:label;
	d2rq:column "BRANI.AMBIENTAZIONE";
.
map:LegameAmbientazioneBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:AmbientazioneBrano;
	d2rq:join "BRANI.AMBIENTAZIONE = BRANI.AMBIENTAZIONE";
.

map:NoteBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BRANI/NOTE/@@BRANI.COD_BRANO|urlify@@";
	d2rq:condition "BRANI.NOTE <> ''";
	d2rq:class crm:E62_String;
.
map:NoteBranoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:NoteBrano;
	d2rq:property rdfs:label;
	d2rq:column "BRANI.NOTE";
.
map:LegameNoteBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:NoteBrano;
	d2rq:join "BRANI.NOTE = BRANI.NOTE";
.

# Proprietà di PianoBrano
map:LabelPianoBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PianoBrano;
	d2rq:property rdfs:label;
	d2rq:column "SPET_BRA.TIT_NOR";
.
map:LegameGenereCodPianoBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PianoBrano;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:Genere;
	d2rq:join "SPET_BRA.GENERE = TADE.ID_TADE";
	d2rq:condition "TADE.TADETIP = 'GEN'";
.

map:LegameBranoPrimaSpettacolo a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property corago:CP9_first_performed_in;
	d2rq:refersToClassMap map:Spettacolo;
	d2rq:join "BRANI.ID_SPET = SPETTACOLI.ID_SPET";
	d2rq:condition "BRANI.ID_SPET <> ''";
.

# Proprietà di Spettacolo
# Etichetta
map:LabelSpettacolo a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Spettacolo;
	d2rq:property rdfs:label;
	d2rq:column "SPETTACOLI.TIT_NOR";
.

# Classe Personaggio (F38_Character)
map:Personaggio a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "PERSONAG/@@PERSONAG.COD_PER|urlify@@";
	d2rq:condition "PERSONAG.COD_PER <> ''";
	d2rq:class frbroo:F38_Character;
.
map:LabelPersonaggio a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Personaggio;
	d2rq:property rdfs:label;
	d2rq:column "PERSONAG.PERSONAG";
.
#Attributi classe Personaggio
#Ordinale (PROG_P)
map:PersonaggioOrdinale a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "PERSONAG/PROG/@@PERSONAG.PROG_P@@";
	d2rq:class crm:E60_Number;
.
map:PersonaggioOrdinaleLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonaggioOrdinale;
	d2rq:property rdfs:label;
	d2rq:column "PERSONAG.PROG_P";
.
map:LegamePersonaggioOrdinale a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Personaggio;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:PersonaggioOrdinale;
	d2rq:join "PERSONAG.PROG_P = PERSONAG.PROG_P";
.
#Qualifica (QUALIFICA_PER)
map:PersonaggioQualifica a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "PERSONAG/QUAL/@@PERSONAG.QUALIFICA_PER|urlify@@";
	d2rq:condition "PERSONAG.QUALIFICA_PER <> ''";
	d2rq:class crm:E62_String;
.
map:PersonaggioQualificaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PersonaggioQualifica;
	d2rq:property rdfs:label;
	d2rq:column "PERSONAG.QUALIFICA_PER";
.
map:LegamePersonaggioQualifica a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Personaggio;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:PersonaggioQualifica;
	d2rq:join "PERSONAG.QUALIFICA_PER = PERSONAG.QUALIFICA_PER";
.
#NotePersonaggio (NOTE_PER)
map:NotePersonaggio a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "PERSONAG/NOTE/@@PERSONAG.NOTE_PER|urlify@@";
	d2rq:condition "PERSONAG.NOTE_PER <> ''";
	d2rq:class crm:E62_String;
.
map:NotePersonaggioLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:NotePersonaggio;
	d2rq:property rdfs:label;
	d2rq:column "PERSONAG.NOTE_PER";
.
map:LegameNotePersonaggio a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Personaggio;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:NotePersonaggio;
	d2rq:join "PERSONAG.NOTE_PER = PERSONAG.NOTE_PER";
.
#Ruolo Personaggio
# Classe C6_Performer_Role (E55_Type)
map:RuoloInterprete a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/RUO&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'RUO'";
	d2rq:class corago:C6_Performer_Role;
.
map:RuoloInterpreteLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloInterprete;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:condition "TADE.TADETIP = 'RUO'";
	d2rq:column "TADE.TADEDA1";
.
map:LegameRuoloInterpretePersonaggio a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Personaggio;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:RuoloInterprete;
	d2rq:join "PERSONAG.RUOLO_P = TADE.TADEPRO";
	d2rq:condition "TADE.TADETIP = 'RUO'";
.
#Genere Personaggio (PER_SESSO)
map:SessoPersonaggio a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/RUO&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'SEX'";
	d2rq:class crm:E55_Type;
.
map:SessoPersonaggioLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:SessoPersonaggio;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:condition "TADE.TADETIP = 'SEX'";
	d2rq:column "TADE.TADEDA1";
.
map:LegameSessoPersonaggioPersonaggio a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Personaggio;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:SessoPersonaggio;
	d2rq:join "PERSONAG.PER_SESSO = TADE.ID_TADE";
	d2rq:condition "TADE.TADETIP = 'SEX'";
.
#Parte del Personaggio (PARTE_P)
map:PartePersonaggio a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/PRT&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'PRT'";
	d2rq:class corago:C7_Character_Part;
.
map:PartePersonaggioLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PartePersonaggio;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:condition "TADE.TADETIP = 'PRT'";
	d2rq:column "TADE.TADEDA1";
.
map:LegamePartePersonaggioPersonaggio a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Personaggio;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:PartePersonaggio;
	d2rq:join "PERSONAG.PARTE_P = TADE.ID_TADE";
	d2rq:condition "TADE.TADETIP = 'PRT'";
.
#Carattere del Personaggio (PARTE_P)
map:TypePersonaggio a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/CRT&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'CRT'";
	d2rq:class corago:C8_Character_Type;
.
map:TypePersonaggioLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TypePersonaggio;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:condition "TADE.TADETIP = 'CRT'";
	d2rq:column "TADE.TADEDA1";
.
map:LegameTypePersonaggioPersonaggio a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Personaggio;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:TypePersonaggio;
	d2rq:join "PERSONAG.PER_CAR = TADE.ID_TADE";
	d2rq:condition "TADE.TADETIP = 'CRT'";
.
#Relazioni Personaggio
map:LegamePersonaggioBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property crm:P129_is_about;
	d2rq:refersToClassMap map:Personaggio;
	d2rq:join "PERSONAG.COD_BRANO => BRANI.COD_BRANO";
.
map:RuoloSpettacoloPersonaggio a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloSpettacolo;
	d2rq:refersToClassMap map:Personaggio;
	d2rq:join "SPET_BRA_CAN.COD_PER = PERSONAG.COD_PER";
	#d2rq:uriPattern "SPET_BRA_CAN/@@SPET_BRA_CAN.ID_BRA_CAN|urlify@@";
	d2rq:property corago:CP8_performed_character;
.



# Gestione Legami (LEGAMI)
map:Legame a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LEGAMI/@@TADE.TADETIP@@/@@LEGAMI.COD_BRANO@@-@@LEGAMI.COD_BRANOL|urlify@@";
	d2rq:join "LEGAMI.LLO = TADE.TADEPRO";
	d2rq:condition "TADE.TADETIP = 'LLO'";
	d2rq:class corago:C5_Link;
.	

map:BranoOrigine a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property corago:CP5_refers_with;
	d2rq:refersToClassMap map:Legame;
	d2rq:join "BRANI.COD_BRANO = LEGAMI.COD_BRANO";
.

map:BranoLegato a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Legame;
	d2rq:property corago:CP6_refers_to;
	d2rq:refersToClassMap map:Brano;
	d2rq:join "LEGAMI.COD_BRANOL = BRANI.COD_BRANO";
.

map:TipoLegame a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Legame;
	d2rq:property rdfs:label;
	d2rq:column "TADE.TADEDA1";
	d2rq:join "LEGAMI.LLO = TADE.TADEPRO";
	d2rq:condition "TADE.TADETIP = 'LLO'";
.	
map:LivelloLegame a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Legame;
	d2rq:property rdfs:label;
	d2rq:column "LEGAMI.TM";
.	
map:NoteLegame a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LEGAMI/NOTE/@@LEGAMI.NOTE_LEG|urlify@@";
	d2rq:condition "LEGAMI.NOTE_LEG <> ''";
	d2rq:class crm:E62_String;
.	
map:LabelNoteLegame a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:NoteLegame;
	d2rq:property rdfs:label;
	d2rq:column "LEGAMI.NOTE_LEG";
	d2rq:condition "LEGAMI.NOTE_LEG <> ''";
.
map:LegameNoteLegame a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Legame;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:NoteLegame;
.

#Gestione Documenti (DOCUMENTI)
map:Documento a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DOCUMENTI/@@DOCUMENTI.ID_DOC|urlify@@";
	d2rq:class frbroo:F3_Manifestation_Product_Type;
.
map:LabelDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Documento;
	d2rq:property rdfs:label;
	d2rq:column "DOCUMENTI.DOC_SIGLA";
.
#Gestione Espressione Documenti (SWT_DOC_BRA)
map:EspressioneDocumento a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SWT_DOC_BRA/@@SWT_DOC_BRA.ID_DOC_BRA|urlify@@";
	d2rq:condition "SWT_DOC_BRA.ID_DOC <> ''";
	d2rq:class frbroo:F24_Publication_Expression;
.
map:LabelEspressioneDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EspressioneDocumento;
	d2rq:property rdfs:label;
	d2rq:column "SWT_DOC_BRA.TIT_NOR";
.
map:EspressioneDocumentoLingua a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EspressioneDocumento;
	d2rq:property xml:lang;
	d2rq:datatype xsd:string;
	d2rq:join "SWT_DOC_BRA.LINGUA_ESEC = TADE.ID_TADE";
	d2rq:condition "TADE.TADETIP = 'LIN'";
	d2rq:column "TADE.TADEPRO";
.
map:LegameGenereEspressioneDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EspressioneDocumento;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:Genere;
	d2rq:join "SWT_DOC_BRA.GENERE = TADE.ID_TADE";
	d2rq:condition "TADE.TADETIP = 'GEN'";
.
map:EspressioneDocumentoDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Documento;
	d2rq:property frbroo:CLR6_should_carry;
	d2rq:refersToClassMap map:EspressioneDocumento;
	d2rq:join "DOCUMENTI.ID_DOC = SWT_DOC_BRA.ID_DOC";
.
map:LegameProductionReleaseEspressioneDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EspressioneDocumento;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:ProductionRelease;
	d2rq:join "SWT_DOC_BRA.SB_ALL = TADE.ID_TADE";
	d2rq:condition "TADE.TADETIP = 'TAL'";
.

map:EspressioneDocumentoNote a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SWT_DOC_BRA/NOTE/@@SWT_DOC_BRA.ID_DOC_BRA|urlify@@";
	d2rq:condition "SWT_DOC_BRA.SB_NOTE <> ''";
	d2rq:class crm:E62_String;
.
map:EspressioneDocumentoNoteLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EspressioneDocumentoNote;
	d2rq:property rdfs:label;
	d2rq:column "SWT_DOC_BRA.SB_NOTE";
.
map:LegameEspressioneDocumentoNote a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EspressioneDocumento;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:EspressioneDocumentoNote;
	d2rq:join "SWT_DOC_BRA.SB_NOTE = SWT_DOC_BRA.SB_NOTE";
.

map:EspressioneDocumentoTipo a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SWT_DOC_BRA/FORMA/@@SWT_DOC_BRA.ID_DOC_BRA|urlify@@";
	d2rq:condition "SWT_DOC_BRA.FORMA <> ''";
	d2rq:class crm:E55_Type;
.
map:EspressioneDocumentoTipoValue a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EspressioneDocumentoTipo;
	d2rq:property rdf:value;
	d2rq:datatype xsd:string;
	d2rq:column "SWT_DOC_BRA.FORMA";
.
map:EspressioneDocumentoTipoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EspressioneDocumentoTipo;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "SWT_DOC_BRA.FORMA";
.
map:LegameEspressioneDocumentoTipo a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EspressioneDocumento;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:EspressioneDocumentoTipo;
	d2rq:join "SWT_DOC_BRA.FORMA = SWT_DOC_BRA.FORMA";
.

#Relazioni verso PianoBrano e Brano
map:EspressioneDocumentoBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EspressioneDocumento;
	d2rq:property crm:P67_refers_to;
	d2rq:refersToClassMap map:Brano;
	d2rq:join "BRANI.COD_BRANO = SWT_DOC_BRA.COD_BRANO";
	d2rq:condition "SWT_DOC_BRA.COD_BRANO <> ''";
.
map:EspressioneDocumentoPianoBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EspressioneDocumento;
	d2rq:property crm:P67_refers_to;
	d2rq:refersToClassMap map:PianoBrano;
	d2rq:join "SPET_BRA.ID_SPET_BRA = SWT_DOC_BRA.ID_SPET_BRA";
	d2rq:condition "SWT_DOC_BRA.ID_SPET_BRA <> ''";
.
#Gestione EventoPubblicazione
map:EventoEspressioneDocumento a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SWT_DOC_BRA/EVN/@@SWT_DOC_BRA.ID_DOC_BRA|urlify@@";
	d2rq:condition "SWT_DOC_BRA.ID_DOC <> ''";
	d2rq:class frbroo:F30_Publication_Event;
.
map:LabelEventoEspressioneDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EventoEspressioneDocumento;
	d2rq:property rdfs:label;
	d2rq:column "SWT_DOC_BRA.TIT_NOR";
.
map:LegameEspressioneDocumentoEvento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EventoEspressioneDocumento;
	d2rq:property crm:P94_has_created;
	d2rq:refersToClassMap map:EspressioneDocumento;
	d2rq:join "DOCUMENTI.ID_DOC = SWT_DOC_BRA.ID_DOC";
.
#EditoreDocumento
map:EditoreDocumento a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DOCUMENTI/@@DOCUMENTI.ID_DOC@@/EDITORE";
	#d2rq:condition "DOCUMENTI.DOC_EDITORE <> ''";
	d2rq:class crm:E39_Actor;
.
map:LabelEditoreDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EditoreDocumento;
	d2rq:property rdfs:label;
	d2rq:column "DOCUMENTI.DOC_EDITORE";
.
map:EditoreDocumentoNome a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DOCUMENTI/EDITORE/@@DOCUMENTI.DOC_EDITORE|urlify@@";
	#d2rq:condition "DOCUMENTI.DOC_EDITORE <> ''";
	d2rq:class crm:E82_ActorAppellation;
.
map:LabelEditoreDocumentoNome a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EditoreDocumentoNome;
	d2rq:property rdfs:label;
	d2rq:column "DOCUMENTI.DOC_EDITORE";
.
map:LegameEditoreDocumentoNome a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EditoreDocumento;
	d2rq:property crm:P131_is_identified_by;
	d2rq:refersToClassMap map:EditoreDocumentoNome;
	#d2rq:condition "DOCUMENTI.DOC_EDITORE <> ''";
.
map:EventoEspressioneDocumentoEditore a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EventoEspressioneDocumento;
	d2rq:property crm:P14_carried_out_by;
	d2rq:refersToClassMap map:EditoreDocumento;
	d2rq:join "DOCUMENTI.ID_DOC = SWT_DOC_BRA.ID_DOC";
.

map:DocumentoNote a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DOCUMENTI/NOTE/@@DOCUMENTI.ID_DOC|urlify@@";
	d2rq:condition "DOCUMENTI.DOC_NOTE <> ''";
	d2rq:class crm:E62_String;
.
map:DocumentoNoteLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DocumentoNote;
	d2rq:property rdfs:label;
	d2rq:column "DOCUMENTI.DOC_NOTE";
.
map:LegameDocumentoNote a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Documento;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:DocumentoNote;
	d2rq:join "DOCUMENTI.DOC_NOTE = DOCUMENTI.DOC_NOTE";
.

map:DocumentoPaginazione a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DOCUMENTI/PAG/@@DOCUMENTI.ID_DOC|urlify@@";
	d2rq:condition "DOCUMENTI.DOC_PAGINAZIONE <> ''";
	d2rq:class crm:E62_String;
.
map:DocumentoPaginazioneLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DocumentoPaginazione;
	d2rq:property rdfs:label;
	d2rq:column "DOCUMENTI.DOC_PAGINAZIONE";
.
map:LegameDocumentoPaginazione a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Documento;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:DocumentoPaginazione;
	d2rq:join "DOCUMENTI.DOC_PAGINAZIONE = DOCUMENTI.DOC_PAGINAZIONE";
.

#LuogoEdizione
map:LuogoEdizione a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DOCUMENTI/LUOGO/@@DOCUMENTI.ID_DOC|urlify@@";
	d2rq:condition "DOCUMENTI.DOC_LUOGO <> ''";
	d2rq:class frbroo:F9_Place;
.
map:LuogoEdizioneLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoEdizione;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "DOCUMENTI.DOC_LUOGO";
.
map:LegameLuogoEdizioneDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EditoreDocumento;
	d2rq:property crm:P74_has_current_or_former_residence;
	d2rq:refersToClassMap map:LuogoEdizione;
.
# E44_Place_Appellation
map:LuogoEdizionePA a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LUOGO/@@DOCUMENTI.DOC_LUOGO|urlify@@";
	d2rq:condition "DOCUMENTI.DOC_LUOGO <> ''";
	d2rq:class crm:E44_Place_Appellation;
.
map:LegameLuogoEdizioneDocumentoPA a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoEdizione;
	d2rq:property crm:P87_is_identified_by;
	d2rq:refersToClassMap map:LuogoEdizionePA;
.
#DataEdizione 
# E52_Time-Span
map:DataEdizione a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DOCUMENTI/DATA/@@DOCUMENTI.DOC_DATA|urlify@@";
	d2rq:condition "DOCUMENTI.DOC_DATA <> ''";
	d2rq:class crm:E52_Time-Span;
.
map:DataEdizioneLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DataEdizione;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "DOCUMENTI.DOC_DATA";
.
map:LegameDataEdizione a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EventoEspressioneDocumento;
	d2rq:property crm:P4_has_time-span;
	d2rq:refersToClassMap map:DataEdizione;
	d2rq:join "DOCUMENTI.ID_DOC = SWT_DOC_BRA.ID_DOC";
.
map:DataEdizioneTA a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DATA/@@DOCUMENTI.DOC_DATA|urlify@@";
	d2rq:condition "DOCUMENTI.DOC_DATA <> ''";
	d2rq:class crm:E49_Time_Appellation;
.
map:DataEdizioneTALabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DataEdizioneTA;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "DOCUMENTI.DOC_DATA";
.
map:DataEdizioneTAValue a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DataEdizioneTA;
	d2rq:property rdf:value;
	d2rq:datatype xsd:dateTime;
	d2rq:sqlExpression "Left(DOCUMENTI.DOC_DATA,4)+'-01-01T00:00:00Z'";
	d2rq:condition "LEN(DOCUMENTI.DOC_DATA)>0";
.
map:LegameDataEdizioneTA a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DataEdizione;
	d2rq:property crm:P78_is_identified_by;
	d2rq:refersToClassMap map:DataEdizioneTA;
.


#Attributi Documento
#Tipo Documento
map:TipoDocumento a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/LB1&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'LB1'";
	d2rq:class corago:E55_Type;
.
map:TipoDocumentoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TipoDocumento;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "TADE.TADEDA1";
.
map:TipoDocumentoDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Documento;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:TipoDocumento;
	d2rq:join "DOCUMENTI.DOC_TIPO = TADE.ID_TADE";
.
#Gestione TitoloDocumento su EspressioneDocumento (DOC_BRA_TIT) 
map:TitoloDocumento a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TITOLI/DOC_BRA_TIT/@@DOC_BRA_TIT.ID_DOC_BRA|urlify@@/@@DOC_BRA_TIT.NPRO|urlify@@";
	d2rq:join "SWT_DOC_BRA.ID_DOC_BRA = DOC_BRA_TIT.ID_DOC_BRA";
	d2rq:class crm:E35_Title;
.
map:TitoloDocumentoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloDocumento;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "DOC_BRA_TIT.TIT_NOR";
.
map:TitoloDocumentoLingua a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloDocumento;
	d2rq:property xml:lang;
	d2rq:datatype xsd:string;
	d2rq:join "DOC_BRA_TIT.LINGUA_TIT = TADE.ID_TADE";
	d2rq:condition "TADE.TADETIP = 'LIN'";
	d2rq:column "TADE.TADEPRO";
.
map:TitoloDocumentoOrdinale a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TITOLI/DOC_BRA_TIT/@@DOC_BRA_TIT.NPRO|urlify@@";
	d2rq:class crm:E60_Number;
.
map:TitoloDocumentoOrdinaleLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloDocumentoOrdinale;
	d2rq:property rdfs:label;
	d2rq:column "DOC_BRA_TIT.NPRO";
.
map:LegameTitoloDocumentoOrdinale a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloDocumento;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:TitoloDocumentoOrdinale;
	d2rq:join "DOC_BRA_TIT.NPRO = DOC_BRA_TIT.NPRO";
.
map:LegameTitoloDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EspressioneDocumento;
	d2rq:property crm:P102_has_title;
	d2rq:refersToClassMap map:TitoloDocumento;
	d2rq:join "SWT_DOC_BRA.ID_DOC_BRA = DOC_BRA_TIT.ID_DOC_BRA";
.
map:LegameTitoloDocumentoTipo a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloDocumento;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:BranoTitoloTipo;
	d2rq:join "DOC_BRA_TIT.TIPO_TIT = TADE.ID_TADE";
.
#Grestione ResponsabileDocumento (SWT_DOC_RESP)
map:RuoloResponsabileDocumento a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SWT_DOC_RESP/@@SWT_DOC_RESP.ID_DOC_RESP@@";
	d2rq:condition "SWT_DOC_RESP.ID_DOC <> ''";
	d2rq:condition "SWT_DOC_RESP.COD_RESP <> ''";
	d2rq:class corago:C2_Actor_Role;
.
map:RuoloResponsabileDocumentoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileDocumento;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:join "SWT_DOC_RESP.QUALIFICA = TADE.ID_TADE";
	d2rq:column "TADE.TADEDA1";
.
map:RuoloResponsabileDocumentoP1 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Documento;
	d2rq:refersToClassMap map:RuoloResponsabileDocumento;
	d2rq:join "SWT_DOC_RESP.ID_DOC => DOCUMENTI.ID_DOC";
	d2rq:property corago:CP2_carried_out_role;
.
map:RuoloResponsabileDocumentoP2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileDocumento;
	d2rq:refersToClassMap map:Responsabile;
	d2rq:property corago:CP3_carried_out_actor;
	d2rq:join "SWT_DOC_RESP.COD_RESP = RESPONS.COD_RESP";
.
#Gestione LegameDocumento (SWT_LEGAMI_DOC)
map:LegameDocumento a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LEGAMI/@@TADE.TADETIP@@/@@SWT_LEGAMI_DOC.ID_DOC@@-@@SWT_LEGAMI_DOC.ID_DOC_PADRE|urlify@@";
	d2rq:join "SWT_LEGAMI_DOC.LEG_TIPO = TADE.ID_TADE";
	d2rq:class corago:C5_Link;
.	
map:LegameDocumentoOrigine a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Documento;
	d2rq:property corago:CP5_refers_with;
	d2rq:refersToClassMap map:LegameDocumento;
	d2rq:join "DOCUMENTI.ID_DOC = SWT_LEGAMI_DOC.ID_DOC";
.
map:LegameDocumentoLegato a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LegameDocumento;
	d2rq:property corago:CP6_refers_to;
	d2rq:refersToClassMap map:Documento;
	d2rq:join "SWT_LEGAMI_DOC.ID_DOC_PADRE = DOCUMENTI.ID_DOC";
.
map:TipoLegameDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LegameDocumento;
	d2rq:property rdfs:label;
	d2rq:column "TADE.TADEDA1";
	d2rq:join "SWT_LEGAMI_DOC.LEG_TIPO = TADE.ID_TADE";
.	
#Gestione StrutturaDocumento (DOC_STRUTTURA)
map:StrutturaDocumento a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DOC_STRUTTURA/@@DOC_STRUTTURA.ID_DS|urlify@@";
	d2rq:class frbroo:F23_Expression_Fragment;
.
map:LabelStrutturaDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:StrutturaDocumento;
	d2rq:property rdfs:label;
	d2rq:column "DOC_STRUTTURA.DS_INTESTAZIONE";
.
map:LegameStrutturaDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Documento;
	d2rq:property frbroo:R15_has_fragment;
	d2rq:refersToClassMap map:StrutturaDocumento;
	d2rq:join "DOC_STRUTTURA.ID_DOC = DOCUMENTI.ID_DOC";
.
map:TipoStrutturaDocumento a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/TPR&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'TPR'";
	d2rq:class corago:E55_Type;
.
map:TipoStrutturaDocumentoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TipoStrutturaDocumento;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "TADE.TADEDA1";
.
map:LegameTipoStrutturaDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:StrutturaDocumento;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:TipoStrutturaDocumento;
	d2rq:join "DOC_STRUTTURA.DS_TIPO = TADE.ID_TADE";
.
map:StrutturaDocumentoOrdinale a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DOC_STRUTTURA/@@DOC_STRUTTURA.ID_DS@@/@@DOC_STRUTTURA.DS_NPRO|urlify@@";
	d2rq:class crm:E60_Number;
.
map:StrutturaDocumentoOrdinaleLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:StrutturaDocumentoOrdinale;
	d2rq:property rdfs:label;
	d2rq:column "DOC_STRUTTURA.DS_NPRO";
.
map:LegameStrutturaDocumentoOrdinale a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:StrutturaDocumento;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:StrutturaDocumentoOrdinale;
	d2rq:join "DOC_STRUTTURA.DS_NPRO = DOC_STRUTTURA.DS_NPRO";
.
map:StrutturaDocumentoPagina a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DOC_STRUTTURA/PAG/@@DOC_STRUTTURA.DS_PAGINA|urlify@@";
	d2rq:condition "DOC_STRUTTURA.DS_PAGINA <> ''";
	d2rq:class crm:E62_String;
.
map:StrutturaDocumentoPaginaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:StrutturaDocumentoPagina;
	d2rq:property rdfs:label;
	d2rq:column "DOC_STRUTTURA.DS_PAGINA";
.
map:LegameStrutturaDocumentoPagina a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:StrutturaDocumento;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:StrutturaDocumentoPagina;
	d2rq:join "DOC_STRUTTURA.DS_PAGINA = DOC_STRUTTURA.DS_PAGINA";
.
#Gestione Testo, Explicit come E33 Linguistic Object   legato da P128 carries [valutare se tipare con E55]
map:TestoDocumentoStruttura a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DOC_STRUTTURA/DS_TESTO/@@DOC_STRUTTURA.ID_DS|urlify@@";
	d2rq:condition "DOC_STRUTTURA.DS_TESTO <> ''";
	d2rq:class crm:E33_Linguistic_Object;
.
map:TestoDocumentoStrutturaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TestoDocumentoStruttura;
	d2rq:property rdfs:label;
	d2rq:column "DOC_STRUTTURA.DS_TESTO";
.
map:LegameTestoDocumentoStruttura a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:StrutturaDocumento;
	d2rq:property crm:P128_carries;
	d2rq:refersToClassMap map:TestoDocumentoStruttura;
	d2rq:join "DOC_STRUTTURA.DS_TESTO = DOC_STRUTTURA.DS_TESTO";
.

map:TipoTestoDocumentoStruttura a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DOC_STRUTTURA/TYP/TESTO";
	d2rq:class crm:E55_Type;
.
map:TipoTestoDocumentoStrutturaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TipoTestoDocumentoStruttura;
	d2rq:property rdfs:label;
	d2rq:constantValue "TEXT";
.
map:LegameTipoTestoDocumentoStruttura a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TestoDocumentoStruttura;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:TipoTestoDocumentoStruttura;
.

map:ExplicitDocumentoStruttura a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DOC_STRUTTURA/DS_EXPLICIT/@@DOC_STRUTTURA.ID_DS|urlify@@";
	d2rq:condition "DOC_STRUTTURA.DS_EXPLICIT <> ''";
	d2rq:class crm:E33_Linguistic_Object;
.
map:ExplicitDocumentoStrutturaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:ExplicitDocumentoStruttura;
	d2rq:property rdfs:label;
	d2rq:column "DOC_STRUTTURA.DS_EXPLICIT";
.
map:LegameExplicitDocumentoStruttura a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:StrutturaDocumento;
	d2rq:property crm:P128_carries;
	d2rq:refersToClassMap map:ExplicitDocumentoStruttura;
	d2rq:join "DOC_STRUTTURA.DS_EXPLICIT = DOC_STRUTTURA.DS_EXPLICIT";
.

map:TipoExplicitDocumentoStruttura a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "DOC_STRUTTURA/TYP/EXPLICIT";
	d2rq:class crm:E55_Type;
.
map:TipoExplicitDocumentoStrutturaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TipoExplicitDocumentoStruttura;
	d2rq:property rdfs:label;
	d2rq:constantValue "EXPLICIT";
.
map:LegameTipoExplicitDocumentoStruttura a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:ExplicitDocumentoStruttura;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:TipoExplicitDocumentoStruttura;
.

#Gestione ResponsabileStruttura (SWT_DOC_STRUT_RESP) 
map:RuoloResponsabileStruttura a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SWT_DOC_STRUT_RESP/@@SWT_DOC_STRUT_RESP.ID_DSR|urlify@@";
	d2rq:condition "SWT_DOC_STRUT_RESP.ID_DS <> ''";
	d2rq:condition "SWT_DOC_STRUT_RESP.COD_RESP <> ''";
	d2rq:class corago:C2_Actor_Role;
.
map:RuoloResponsabileStrutturaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileStruttura;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:join "SWT_DOC_STRUT_RESP.DSR_RSTRU = TADE.ID_TADE";
	d2rq:column "TADE.TADEDA1";
.
map:RuoloResponsabileStrutturaP1 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:StrutturaDocumento;
	d2rq:refersToClassMap map:RuoloResponsabileStruttura;
	d2rq:join "SWT_DOC_STRUT_RESP.ID_DS => DOC_STRUTTURA.ID_DS";
	d2rq:property corago:CP2_carried_out_role;
.
map:RuoloResponsabileStrutturaP2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileStruttura;
	d2rq:refersToClassMap map:Responsabile;
	d2rq:property corago:CP3_carried_out_actor;
	d2rq:join "SWT_DOC_STRUT_RESP.COD_RESP = RESPONS.COD_RESP";
.
map:RuoloResponsabileStrutturaNota a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SWT_DOC_STRUT_RESP/NOME/@@SWT_DOC_STRUT_RESP.DSR_NOME|urlify@@";
	d2rq:condition "SWT_DOC_STRUT_RESP.DSR_NOME <> ''";
	d2rq:class crm:E62_String;
.
map:RuoloResponsabileStrutturaNotaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileStrutturaNota;
	d2rq:property rdfs:label;
	d2rq:column "SWT_DOC_STRUT_RESP.DSR_NOME";
.
map:LegameRuoloResponsabileStrutturaNota a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileStruttura;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:RuoloResponsabileStrutturaNota;
	d2rq:join "SWT_DOC_STRUT_RESP.DSR_NOME = SWT_DOC_STRUT_RESP.DSR_NOME";
.

#Gestione ResponsabileEspressioneDocumento (SWT_DOC_BRA_RB)
map:RuoloResponsabileEspressioneDocumento a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SWT_DOC_BRA_RB/@@SWT_DOC_BRA_RB.ID_DOCBRA_RB|urlify@@";
	d2rq:condition "SWT_DOC_BRA_RB.ID_DOC_BRA <> ''";
	d2rq:condition "SWT_DOC_BRA_RB.COD_RESP <> ''";
	d2rq:class corago:C2_Actor_Role;
.
map:RuoloResponsabileEspressioneDocumentoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileEspressioneDocumento;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:join "SWT_DOC_BRA_RB.COD_TIPO_R = TADE.ID_TADE";
	d2rq:column "TADE.TADEDA1";
.
map:RuoloResponsabileEspressioneDocumentoP1 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EspressioneDocumento;
	d2rq:refersToClassMap map:RuoloResponsabileEspressioneDocumento;
	d2rq:join "SWT_DOC_BRA_RB.ID_DOC_BRA => SWT_DOC_BRA.ID_DOC_BRA";
	d2rq:property corago:CP2_carried_out_role;
.
map:RuoloResponsabileEspressioneDocumentoP2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileEspressioneDocumento;
	d2rq:refersToClassMap map:Responsabile;
	d2rq:property corago:CP3_carried_out_actor;
	d2rq:join "SWT_DOC_BRA_RB.COD_RESP = RESPONS.COD_RESP";
.
map:RuoloResponsabileEspressioneDocumentoNota a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SWT_DOC_BRA_RB/NOME/@@SWT_DOC_BRA_RB.NOME_OR|urlify@@";
	d2rq:condition "SWT_DOC_BRA_RB.NOME_OR <> ''";
	d2rq:class crm:E62_String;
.
map:RuoloResponsabileEspressioneDocumentoNotaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileEspressioneDocumentoNota;
	d2rq:property rdfs:label;
	d2rq:column "SWT_DOC_BRA_RB.NOME_OR";
.
map:LegameRuoloResponsabileEspressioneDocumentoNota a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileEspressioneDocumento;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:RuoloResponsabileEspressioneDocumentoNota;
	d2rq:join "SWT_DOC_BRA_RB.ID_DOCBRA_RB = SWT_DOC_BRA_RB.ID_DOCBRA_RB";
.
#Gestione ResponsabileEspressionePersonaggio e Piani (SWT_DOC_BRA_CAN)
map:RuoloResponsabileEspressionePersonaggio a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SWT_DOC_BRA_CAN/@@SWT_DOC_BRA_CAN.ID_DOCBRA_CAN|urlify@@";
	#d2rq:condition "SWT_DOC_BRA_CAN.ID_DOC_BRA <> ''";
	d2rq:condition "SWT_DOC_BRA_CAN.COD_PER <> ''";
	d2rq:condition "SWT_DOC_BRA_CAN.COD_RESP <> ''";
	d2rq:class corago:C2_Actor_Role;
.
map:RuoloResponsabileEspressionePersonaggioLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileEspressionePersonaggio;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:join "SWT_DOC_BRA_CAN.RUOLO = TADE.ID_TADE";
	d2rq:column "TADE.TADEDA1";
.
map:RuoloResponsabileEspressionePersonaggioP1 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:EspressioneDocumento;
	d2rq:refersToClassMap map:RuoloResponsabileEspressionePersonaggio;
	d2rq:join "SWT_DOC_BRA_CAN.ID_DOC_BRA => SWT_DOC_BRA.ID_DOC_BRA";
	d2rq:property corago:CP2_carried_out_role;
.
map:RuoloResponsabileEspressionePersonaggioP2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileEspressionePersonaggio;
	d2rq:refersToClassMap map:Responsabile;
	d2rq:property corago:CP3_carried_out_actor;
	d2rq:join "SWT_DOC_BRA_CAN.COD_RESP = RESPONS.COD_RESP";
.
#Legame EspressioneDocumento e Personaggi (SWT_DOC_BRA_CAN)
map:LegameEspressioneDocumentoPersonaggio a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Personaggio;
	d2rq:property crm:P67_refers_to;
	d2rq:refersToClassMap map:EspressioneDocumento;
	d2rq:join "SWT_DOC_BRA_CAN.COD_PER = PERSONAG.COD_PER";
	d2rq:join "SWT_DOC_BRA_CAN.ID_DOC_BRA = SWT_DOC_BRA.ID_DOC_BRA";
.
#Legame RuoloResponsabileEspressionePersonaggio e Personaggi (SWT_DOC_BRA_CAN)
map:LegameRuoloResponsabileEspressionePersonaggio a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileEspressionePersonaggio;
	d2rq:property corago:CP8_performed_character;
	d2rq:refersToClassMap map:Personaggio;
	d2rq:join "SWT_DOC_BRA_CAN.COD_PER = PERSONAG.COD_PER";
	#d2rq:condition "SWT_DOC_BRA_CAN.COD_PER <> ''";
.

#Gestione Bibliografia (BIBLIOGRAFIA)
map:Bibliografia a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BIBLIOGRAFIA/@@BIBLIOGRAFIA.ID_BIB|urlify@@";
	d2rq:class crm:E31_Document;
.	
map:Bibliografia_Sigla a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Bibliografia;
	d2rq:property rdfs:label;
	d2rq:column "BIBLIOGRAFIA.SIGLA_BIB";
.
#Creazione CreazioneEspressioneBiblio 
map:CreazioneEspressioneBiblio a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BIBLIOGRAFIA/EXPR/@@BIBLIOGRAFIA.ID_BIB|urlify@@";
	d2rq:class frbroo:F28_Expression_Creation;
.	
map:CreazioneEspressioneBiblioLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:CreazioneEspressioneBiblio;
	d2rq:property rdfs:label;
	d2rq:column "BIBLIOGRAFIA.TIT_ORD";
.
map:LegameCreazioneEspressioneBiblio a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:CreazioneEspressioneBiblio;
	d2rq:property frbroo:R17_created;
	d2rq:uriPattern "BIBLIOGRAFIA/@@BIBLIOGRAFIA.ID_BIB|urlify@@";
.

#Creazione PubblicazioneBiblio
map:PubblicazioneBiblio a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BIBLIOGRAFIA/PUBB/@@BIBLIOGRAFIA.ID_BIB|urlify@@";
	d2rq:class frbroo:F30_Publication_Event;
.	
map:PubblicazioneBiblioLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PubblicazioneBiblio;
	d2rq:property rdfs:label;
	d2rq:column "BIBLIOGRAFIA.TIT_ORD";
.
map:LegamePubblicazioneBiblio a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PubblicazioneBiblio;
	d2rq:property crm:P94_has_created;
	d2rq:uriPattern "BIBLIOGRAFIA/@@BIBLIOGRAFIA.ID_BIB|urlify@@";
.
# Legame Bibliografia Responsabile  (SWT_RESPONS_BIB)
map:RuoloResponsabileEspressioneBiblio a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SWT_RESPONS_BIB/@@SWT_RESPONS_BIB.ID_RINV|urlify@@";
	d2rq:condition "SWT_RESPONS_BIB.ID_BIB <> ''";
	d2rq:condition "SWT_RESPONS_BIB.COD_RESP <> ''";
	d2rq:class corago:C2_Actor_Role;
.
map:RuoloResponsabileEspressioneBiblioLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileEspressioneBiblio;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "SWT_RESPONS_BIB.RINVIO";
.
map:RuoloResponsabileEspressioneBiblioP1 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:CreazioneEspressioneBiblio;
	d2rq:refersToClassMap map:RuoloResponsabileEspressioneBiblio;
	d2rq:join "SWT_RESPONS_BIB.ID_BIB => BIBLIOGRAFIA.ID_BIB";
	d2rq:property corago:CP2_carried_out_role;
.
map:RuoloResponsabileEspressioneBiblioP2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RuoloResponsabileEspressioneBiblio;
	d2rq:refersToClassMap map:Responsabile;
	d2rq:property corago:CP3_carried_out_actor;
	d2rq:join "SWT_RESPONS_BIB.COD_RESP = RESPONS.COD_RESP";
.
#Attributi Bibliografia
#Titoli
map:TitoloBibliografia a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BIBLIOGRAFIA/TIT_ORD/@@BIBLIOGRAFIA.ID_BIB|urlify@@";
	d2rq:class crm:E35_Title;
.
map:TitoloBibliografiaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloBibliografia;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "BIBLIOGRAFIA.TIT_ORD";
.
map:LegameTitoloBibliografia a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Bibliografia;
	d2rq:refersToClassMap map:TitoloBibliografia;
	d2rq:property crm:P102_has_title;
	d2rq:join "BIBLIOGRAFIA.ID_BIB = BIBLIOGRAFIA.ID_BIB";
.
map:TitoloSagBibliografia a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BIBLIOGRAFIA/TIT_SAG/@@BIBLIOGRAFIA.ID_BIB|urlify@@";
	d2rq:class crm:E35_Title;
.
map:TitoloSagBibliografiaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloSagBibliografia;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "BIBLIOGRAFIA.TITOLO_SAG";
.
map:LegameTitoloSagBibliografia a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Bibliografia;
	d2rq:refersToClassMap map:TitoloSagBibliografia;
	d2rq:property crm:P102_has_title;
	d2rq:join "BIBLIOGRAFIA.ID_BIB = BIBLIOGRAFIA.ID_BIB";
.

map:TitoloLibBibliografia a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BIBLIOGRAFIA/TIT_LIB/@@BIBLIOGRAFIA.ID_BIB|urlify@@";
	d2rq:condition "BIBLIOGRAFIA.TITOLO_LIB <> ''";
	d2rq:class crm:E35_Title;
.
map:TitoloLibBibliografiaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloLibBibliografia;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "BIBLIOGRAFIA.TITOLO_LIB";
.
map:LegameTitoloLibBibliografia a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Bibliografia;
	d2rq:refersToClassMap map:TitoloLibBibliografia;
	d2rq:property crm:P102_has_title;
	d2rq:join "BIBLIOGRAFIA.TITOLO_LIB = BIBLIOGRAFIA.TITOLO_LIB";
.

#Tipo
map:TipoBibliografia a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BIBLIOGRAFIA/TYP&@@BIBLIOGRAFIA.TIPO_BIB|urlify@@";
	d2rq:class corago:E55_Type;
.
map:TipoBibliografiaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TipoBibliografia;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "BIBLIOGRAFIA.TIPO_BIB";
.
map:LegameTipoBibliografia a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Bibliografia;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:TipoBibliografia;
	d2rq:join "BIBLIOGRAFIA.TIPO_BIB = BIBLIOGRAFIA.TIPO_BIB";
.
#Attributi PubblicazioneBiblio
map:DataPubblicazioneBiblio a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BIBLIOGRAFIA/ANNO/@@BIBLIOGRAFIA.ANNO|urlify@@@@";
	d2rq:condition "BIBLIOGRAFIA.ANNO <> ''";
	d2rq:class crm:E52_Time-Span;
.
map:DataPubblicazioneBiblioLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:DataPubblicazioneBiblio;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "BIBLIOGRAFIA.ANNO";
.
map:LegameDataPubblicazioneBiblio a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PubblicazioneBiblio;
	d2rq:property crm:P4_has_time-span;
	d2rq:refersToClassMap map:DataPubblicazioneBiblio;
.
#Note varie
map:PubblicazioneBiblioPag a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BIBLIOGRAFIA/PAG/@@BIBLIOGRAFIA.PAGINAZIONE|urlify@@";
	d2rq:condition "BIBLIOGRAFIA.PAGINAZIONE <> ''";
	d2rq:class crm:E62_String;
.
map:PubblicazioneBiblioPagLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PubblicazioneBiblioPag;
	d2rq:property rdfs:label;
	d2rq:column "BIBLIOGRAFIA.PAGINAZIONE";
.
map:LegamePubblicazioneBiblioPag a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PubblicazioneBiblio;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:PubblicazioneBiblioPag;
	d2rq:join "BIBLIOGRAFIA.PAGINAZIONE = BIBLIOGRAFIA.PAGINAZIONE";
.
map:PubblicazioneBiblioNote a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BIBLIOGRAFIA/PAG/@@BIBLIOGRAFIA.NOTE_BIB|urlify@@";
	d2rq:condition "BIBLIOGRAFIA.NOTE_BIB <> ''";
	d2rq:class crm:E62_String;
.
map:PubblicazioneBiblioNoteLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PubblicazioneBiblioNote;
	d2rq:property rdfs:label;
	d2rq:column "BIBLIOGRAFIA.NOTE_BIB";
.
map:LegamePubblicazioneBiblioNote a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PubblicazioneBiblio;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:PubblicazioneBiblioNote;
	d2rq:join "BIBLIOGRAFIA.NOTE_BIB = BIBLIOGRAFIA.NOTE_BIB";
.
#Luogo edizione
# F9_Place
map:LuogoPubblicazioneBiblio a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "BIBLIOGRAFIA/LUOGO/@@BIBLIOGRAFIA.ID_BIB|urlify@@";
	d2rq:condition "BIBLIOGRAFIA.LUOGO_EDI <> ''";
	d2rq:class frbroo:F9_Place;
.
map:LuogoPubblicazioneBiblioLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoPubblicazioneBiblio;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "BIBLIOGRAFIA.LUOGO_EDI";
.
map:LegameLuogoPubblicazioneBiblio a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:PubblicazioneBiblio;
	d2rq:property crm:P7_took_place_at;
	d2rq:refersToClassMap map:LuogoPubblicazioneBiblio;
.
# E44_Place_Appellation
map:LuogoPubblicazioneBiblioPA a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LUOGO/@@BIBLIOGRAFIA.LUOGO_EDI|urlify@@";
	d2rq:condition "BIBLIOGRAFIA.LUOGO_EDI <> ''";
	d2rq:class crm:E44_Place_Appellation;
.
map:LuogoPubblicazioneBiblioPALabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoPubblicazioneBiblioPA;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "BIBLIOGRAFIA.LUOGO_EDI";
.
map:LegameLuogoPubblicazioneBiblioPA a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoPubblicazioneBiblio;
	d2rq:property crm:P1_is_identified_by;
	d2rq:refersToClassMap map:LuogoPubblicazioneBiblioPA;
.
#Gestione Legami E31_Document -Documento (SWT_DOC_BIB) -> INFERREED
#map:LegameDocumentoBibliografia a d2rq:PropertyBridge;
#	d2rq:belongsToClassMap map:Bibliografia;
#	d2rq:property crm:P70_documents;
#	d2rq:refersToClassMap map:Documento;
#	d2rq:join "SWT_DOC_BIB.ID_DOC = DOCUMENTI.ID_DOC";
#.
map:RinvioBiblio a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LEGAMI/RIN/@@SWT_DOC_BIB.ID_RINV|urlify@@";
	d2rq:class corago:C5_Link;
.	
map:RinvioBiblioLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblio;
	d2rq:property rdfs:label;
	d2rq:column "SWT_DOC_BIB.RINVIO";
.
map:RinvioBiblioP1 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Bibliografia;
	d2rq:property corago:CP5_refers_with;
	d2rq:refersToClassMap map:RinvioBiblio;
	d2rq:join "BIBLIOGRAFIA.ID_BIB = SWT_DOC_BIB.ID_BIB";
.
map:RinvioBiblioP2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblio;
	d2rq:property corago:CP6_refers_to;
	d2rq:refersToClassMap map:Documento;
	d2rq:join "SWT_DOC_BIB.ID_DOC = DOCUMENTI.ID_DOC";
.
map:RinvioBiblioOrdinale a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LEGAMI/RIN/ORD/@@SWT_DOC_BIB.ID_RINV|urlify@@";
	d2rq:class crm:E60_Number;
.
map:RinvioBiblioOrdinaleLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblioOrdinale;
	d2rq:property rdfs:label;
	d2rq:column "SWT_DOC_BIB.NPRO";
.
map:LegameRinvioBiblioOrdinale a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblio;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:RinvioBiblioOrdinale;
	d2rq:join "SWT_DOC_BIB.NPRO = SWT_DOC_BIB.NPRO";
.

map:RinvioBiblioNote a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LEGAMI/RIN/NOTE/@@SWT_DOC_BIB.ID_RINV|urlify@@";
	d2rq:condition "SWT_DOC_BIB.RIN_NOTE <> ''";
	d2rq:class crm:E62_String;
.
map:RinvioBiblioNoteLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblioNote;
	d2rq:property rdfs:label;
	d2rq:column "SWT_DOC_BIB.RIN_NOTE";
.
map:LegameRinvioBiblioNote a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblio;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:RinvioBiblioNote;
	d2rq:join "SWT_DOC_BIB.RIN_NOTE = SWT_DOC_BIB.RIN_NOTE";
.

#Gestione LegameBiblioSpettacolo (RIN_BIB)
map:RinvioBiblioSpettacolo a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LEGAMI/RIN_SPE/@@RIN_BIB.ID_RINV|urlify@@";
	d2rq:class corago:C5_Link;
.	
map:RinvioBiblioSpettacoloLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblioSpettacolo;
	d2rq:property rdfs:label;
	d2rq:column "RIN_BIB.RINVIO";
.
map:RinvioBiblioSpettacoloP1 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Bibliografia;
	d2rq:property corago:CP5_refers_with;
	d2rq:refersToClassMap map:RinvioBiblioSpettacolo;
	d2rq:join "BIBLIOGRAFIA.ID_BIB = RIN_BIB.ID_BIB";
.
map:RinvioBiblioSpettacoloP2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblioSpettacolo;
	d2rq:property corago:CP6_refers_to;
	d2rq:refersToClassMap map:Spettacolo;
	d2rq:join "RIN_BIB.ID_SPET = SPETTACOLI.ID_SPET";
.
map:RinvioBiblioSpettacoloOrdinale a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LEGAMI/RIN_SPE/ORD/@@RIN_BIB.ID_RINV|urlify@@";
	d2rq:class crm:E60_Number;
.
map:RinvioBiblioSpettacoloOrdinaleLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblioSpettacoloOrdinale;
	d2rq:property rdfs:label;
	d2rq:column "RIN_BIB.NPRO";
.
map:LegameRinvioBiblioSpettacoloOrdinale a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblioSpettacolo;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:RinvioBiblioSpettacoloOrdinale;
	d2rq:join "RIN_BIB.NPRO = RIN_BIB.NPRO";
.
map:RinvioBiblioSpettacoloNota a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LEGAMI/RIN_SPE/NOTE/@@RIN_BIB.ID_RINV|urlify@@";
	d2rq:condition "RIN_BIB.RIN_NOTE <> ''";
	d2rq:class crm:E62_String;
.
map:RinvioBiblioSpettacoloNotaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblioSpettacoloNota;
	d2rq:property rdfs:label;
	d2rq:column "RIN_BIB.RIN_NOTE";
	d2rq:condition "RIN_BIB.RIN_NOTE <> ''";
.
map:LegameRinvioBiblioSpettacoloNota a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblioSpettacolo;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:RinvioBiblioSpettacoloNota;
	d2rq:join "RIN_BIB.RIN_NOTE = RIN_BIB.RIN_NOTE";
	d2rq:condition "RIN_BIB.RIN_NOTE <> ''";
.
#Gestione LegameBiblioWork (SWT_BRANI_BIB)
map:RinvioBiblioBrano a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LEGAMI/RIN_BRA/@@SWT_BRANI_BIB.ID_RINV|urlify@@";
	d2rq:class corago:C5_Link;
.	
map:RinvioBiblioBranoLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblioBrano;
	d2rq:property rdfs:label;
	d2rq:condition "SWT_BRANI_BIB.RINVIO <> ''";
	d2rq:column "SWT_BRANI_BIB.RINVIO";
.
map:RinvioBiblioBranoP1 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Bibliografia;
	d2rq:property corago:CP5_refers_with;
	d2rq:refersToClassMap map:RinvioBiblioBrano;
	d2rq:join "BIBLIOGRAFIA.ID_BIB = SWT_BRANI_BIB.ID_BIB";
.
map:RinvioBiblioBranoP2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblioBrano;
	d2rq:property corago:CP6_refers_to;
	d2rq:refersToClassMap map:Brano;
	d2rq:join "BRANI.COD_BRANO = SWT_BRANI_BIB.COD_BRANO";
.
map:RinvioBiblioBranoOrdinale a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LEGAMI/RIN_BRA/ORD/@@SWT_BRANI_BIB.ID_RINV|urlify@@";
	d2rq:class crm:E60_Number;
.
map:RinvioBiblioBranoOrdinaleLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblioBranoOrdinale;
	d2rq:property rdfs:label;
	d2rq:column "SWT_BRANI_BIB.NPRO";
.
map:LegameRinvioBiblioBranoOrdinale a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblioBrano;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:RinvioBiblioBranoOrdinale;
	d2rq:join "SWT_BRANI_BIB.NPRO = SWT_BRANI_BIB.NPRO";
.
map:RinvioBiblioBranoNota a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LEGAMI/RIN_BRA/NOTE/@@SWT_BRANI_BIB.ID_RINV|urlify@@";
	d2rq:condition "SWT_BRANI_BIB.RIN_NOTE <> ''";
	d2rq:class crm:E62_String;
.
map:RinvioBiblioBranoNotaLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblioBranoNota;
	d2rq:property rdfs:label;
	d2rq:column "SWT_BRANI_BIB.RIN_NOTE";
	d2rq:condition "SWT_BRANI_BIB.RIN_NOTE <> ''";
.
map:LegameRinvioBiblioBranoNota a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RinvioBiblioBrano;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:RinvioBiblioBranoNota;
	d2rq:join "RIN_BIB.RIN_NOTE = RIN_BIB.RIN_NOTE";
	d2rq:condition "RIN_BIB.RIN_NOTE <> ''";
.
#Gestione Item (SWT_DOC_RISM con RISM per Biblioteca)
map:Item a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "ITEM/@@SWT_DOC_RISM.ID_MBIBLIO@@";
	d2rq:class frbroo:F5_Item;
.
map:ItemLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Item;
	d2rq:property rdfs:label;
	d2rq:join "SWT_DOC_RISM.ID_DOC = DOCUMENTI.ID_DOC";
	d2rq:join "SWT_DOC_RISM.ID_RISM = RISM.ID_RISM";
	d2rq:column "DOCUMENTI.DOC_SIGLA";
.

map:ItemColloc a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "ITEM/MCOLLOC/@@SWT_DOC_RISM.ID_MBIBLIO@@";
	d2rq:condition "SWT_DOC_RISM.MCOLLOC <> ''";
	d2rq:class crm:E62_String;
.
map:ItemCollocLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:ItemColloc;
	d2rq:property rdfs:label;
	d2rq:column "SWT_DOC_RISM.MCOLLOC";
.
map:LegameItemColloc a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Item;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:ItemColloc;
.

map:ItemPermLink a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "ITEM/MBIB_ID/@@SWT_DOC_RISM.ID_MBIBLIO@@";
	d2rq:condition "SWT_DOC_RISM.MBIB_ID <> ''";
	d2rq:class crm:E42_Object_Identifier;
.
map:ItemPermLinkLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:ItemPermLink;
	d2rq:property rdfs:label;
	d2rq:column "SWT_DOC_RISM.MBIB_ID";
.
map:LegameItemPermLink a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Item;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:ItemPermLink;
.

#Gestione collocazione Item
# Classe E39_Actor 
map:Rism a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RISM/@@RISM.ID_RISM@@";
	d2rq:class crm:E39_Actor;
.	
map:RismLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Rism;
	d2rq:property rdfs:label;
	d2rq:column "RISM.SIGLA_RISM";
.
#Nome Rism
map:RismAppellation a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RISM/APP/@@RISM.DENOMINAZIONE|urlify@@";
	d2rq:class crm:E82_Actor_Appellation;
.
map:RismAppellationLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:RismAppellation;
	d2rq:property rdfs:label;
	d2rq:column "RISM.DENOMINAZIONE";
.
map:LegameRismAppellation a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Rism;
	d2rq:property crm:P1_is_identified_by;
	d2rq:refersToClassMap map:RismAppellation;
	d2rq:join "RISM.DENOMINAZIONE = RISM.DENOMINAZIONE";
.
map:LuogoRism a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RISM/LUOGO/@@RISM.CITTA|urlify@@";
	d2rq:class frbroo:F9_Place;
.
map:LuogoRismLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoRism;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "RISM.CITTA";
.
map:LegameLuogoRism a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Rism;
	d2rq:property crm:P74_has_current_or_former_residence;
	d2rq:refersToClassMap map:LuogoRism;
.
map:LuogoRismPA a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "LUOGO/@@RISM.CITTA|urlify@@";
	d2rq:condition "RISM.CITTA <> ''";
	d2rq:class crm:E44_Place_Appellation;
.
map:LuogoRismPALabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoRismPA;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "RISM.CITTA";
.
map:LegameLuogoRismPA a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:LuogoRism;
	d2rq:property crm:P1_is_identified_by;
	d2rq:refersToClassMap map:LuogoRismPA;
.
#Gestione identificativi Rism 
map:SiglaRism a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RISM/SIGLA/@@RISM.SIGLA_RISM|urlify@@@@";
	d2rq:class crm:E42_Identifier;
.
map:SiglaRismLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:SiglaRism;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "RISM.SIGLA_RISM";
.
map:LegameSiglaRism a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Rism;
	d2rq:property crm:P1_is_identified_by;
	d2rq:refersToClassMap map:SiglaRism;
.
map:IccuRism a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "RISM/ICCU/@@RISM.SIGLA_ICCU|urlify@@@@";
	d2rq:class crm:E42_Identifier;
.
map:IccuRismLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:IccuRism;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "RISM.SIGLA_ICCU";
.
map:LegameIccuRism a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Rism;
	d2rq:property crm:P1_is_identified_by;
	d2rq:refersToClassMap map:IccuRism;
.
#Gestione identificativi Item
map:CollocazioneItem a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "ITEM/COL/@@RISM.SIGLA_RISM|urlify@@/@@SWT_DOC_RISM.MCOLLOC|urlify@@";
	d2rq:join "SWT_DOC_RISM.ID_RISM = RISM.ID_RISM";
	d2rq:condition "SWT_DOC_RISM.MCOLLOC <> ''";
	d2rq:class crm:E42_Identifier;
.
map:CollocazioneItemLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:CollocazioneItem;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:condition "SWT_DOC_RISM.MCOLLOC <> ''";
	d2rq:column "SWT_DOC_RISM.MCOLLOC";
.
map:LegameCollocazioneItem a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Item;
	d2rq:property crm:P1_is_identified_by;
	d2rq:refersToClassMap map:CollocazioneItem;
	d2rq:condition "SWT_DOC_RISM.MCOLLOC <> ''";
.
map:TipoCollocazioneItem a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "ITEM/TYP/COL";
	d2rq:class corago:E55_Type;
.
map:TipoCollocazioneLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TipoCollocazioneItem;
	d2rq:property rdfs:label;
	d2rq:constantValue "collocation";
.
map:LegameTipoCollocazione a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:CollocazioneItem;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:TipoCollocazioneItem;
.
map:InventarioItem a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "ITEM/INV/@@RISM.SIGLA_RISM|urlify@@/@@SWT_DOC_RISM.MINVENTARIO|urlify@@";
	d2rq:join "SWT_DOC_RISM.ID_RISM = RISM.ID_RISM";
	d2rq:condition "SWT_DOC_RISM.MINVENTARIO <> ''";
	d2rq:class crm:E42_Identifier;
.
map:InventarioItemLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:InventarioItem;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:condition "SWT_DOC_RISM.MCOLLOC <> ''";
	d2rq:column "SWT_DOC_RISM.MINVENTARIO";
.
map:LegameInventarioItem a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Item;
	d2rq:property crm:P1_is_identified_by;
	d2rq:refersToClassMap map:InventarioItem;
	d2rq:condition "SWT_DOC_RISM.MINVENTARIO <> ''";
.
map:TipoInventarioItem a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "ITEM/TYP/INV";
	d2rq:class corago:E55_Type;
.
map:TipoInventarioItemLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TipoInventarioItem;
	d2rq:property rdfs:label;
	d2rq:constantValue "inventory";
.
map:LegameTipoInventarioItem a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:InventarioItem;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:TipoInventarioItem;
.
map:OlimItem a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "ITEM/OLI/@@RISM.SIGLA_RISM|urlify@@/@@SWT_DOC_RISM.MOLIM|urlify@@";
	d2rq:join "SWT_DOC_RISM.ID_RISM = RISM.ID_RISM";
	d2rq:condition "SWT_DOC_RISM.MOLIM <> ''";
	d2rq:class crm:E42_Identifier;
.
map:OlimItemLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:OlimItem;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:condition "SWT_DOC_RISM.MCOLLOC <> ''";
	d2rq:column "SWT_DOC_RISM.MOLIM";
.
map:LegameOlimItem a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Item;
	d2rq:property crm:P1_is_identified_by;
	d2rq:refersToClassMap map:OlimItem;
	d2rq:condition "SWT_DOC_RISM.MOLIM <> ''";
.
map:TipoOlimItem a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "ITEM/TYP/OLI";
	d2rq:class corago:E55_Type;
.
map:TipoOlimItemLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TipoOlimItem;
	d2rq:property rdfs:label;
	d2rq:constantValue "olim";
.
map:LegameTipoOlimItem a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:OlimItem;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:TipoOlimItem;
.
#Note Item
map:NoteItem a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "ITEM/NOTE/@@SWT_DOC_RISM.MBIB_NOTE|urlify@@";
	d2rq:condition "SWT_DOC_RISM.MBIB_NOTE <> ''";
	d2rq:class crm:E62_String;
.
map:NoteItemLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:NoteItem;
	d2rq:property rdfs:label;
	d2rq:column "SWT_DOC_RISM.MBIB_NOTE";
.
map:LegameNoteItem a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Item;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:NoteItem;
	d2rq:join "SWT_DOC_RISM.MBIB_NOTE = SWT_DOC_RISM.MBIB_NOTE";
.
#Legami Item
map:LegameIntemDocumento a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Item;
	d2rq:property frbroo:R7_is_example_of;
	d2rq:refersToClassMap map:Documento;
	d2rq:join "SWT_DOC_RISM.ID_DOC = DOCUMENTI.ID_DOC";
.
map:LegameIntemRism a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Item;
	d2rq:property crm:P49_has_former_or_current_keeper;
	d2rq:refersToClassMap map:Rism;
	d2rq:join "SWT_DOC_RISM.ID_RISM = RISM.ID_RISM";
.

#SEZ1
map:Sezione a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SEZ/@@SEZ1.ID_SEZ1|urlify@@";
	d2rq:class frbroo:F1_Work;
.
	
map:LegameSezioneBrano a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Brano;
	d2rq:property frbroo:R10_has_member;
	d2rq:refersToClassMap map:Sezione;
	d2rq:join "SEZ1.COD_BRANO = BRANI.COD_BRANO";
.
map:NoteSezione a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Sezione;
	d2rq:property rdfs:label;
	d2rq:column "SEZ1.TIT_SEZ1";
.
map:TipoSezione a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "TADE/SZ1&@@TADE.ID_TADE|urlify@@";
	d2rq:condition "TADE.TADETIP = 'SZ1'";
	d2rq:class corago:E55_Type;
.
map:LabelTipoSezione a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TipoSezione;
	d2rq:property rdfs:label;
	d2rq:column "TADE.TADEDA1";
.
map:LegameTipoSezione a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Sezione;
	d2rq:property crm:P2_has_type;
	d2rq:refersToClassMap map:TipoSezione;
	d2rq:join "SEZ1.COD_SEZ1 = TADE.TADEPRO";
.
map:SezioneOrdinale a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SEZ/SCENE/@@SEZ1.ID_SEZ1|urlify@@/@@SEZ1.SCENA|urlify@@";
	d2rq:condition "SEZ1.SCENA <> ''";
	d2rq:class crm:E60_Number;
.
map:LabelSezioneOrdinale a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:SezioneOrdinale;
	d2rq:property rdfs:label;
	d2rq:column "SEZ1.SCENA";
.
map:LegameSezioneOrdinale a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Sezione;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:SezioneOrdinale;
	d2rq:join "SEZ1.SCENA = SEZ1.SCENA";
	d2rq:condition "SEZ1.SCENA <> ''";
.
map:SezioneNumero a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SEZ/NSEZ/@@SEZ1.ID_SEZ1|urlify@@/@@SEZ1.NSEZ1|urlify@@";
	d2rq:condition "SEZ1.NSEZ1 <> ''";
	d2rq:class crm:E62_String;
.
map:LabelSezioneNumero a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:SezioneNumero;
	d2rq:property rdfs:label;
	d2rq:column "SEZ1.NSEZ1";
.
map:LegameSezioneNumero a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Sezione;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:SezioneNumero;
	d2rq:join "SEZ1.NSEZ1 = SEZ1.NSEZ1";
	d2rq:condition "SEZ1.NSEZ1 <> ''";
.
map:TitoloSezione a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SEZ/TITOLI/@@SEZ1.ID_SEZ1|urlify@@";
	d2rq:condition "SEZ1.TIT_SEZ1  <> ''";
	d2rq:class crm:E35_Title;
.

map:TitoloSezioneLabel a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:TitoloSezione;
	d2rq:property rdfs:label;
	d2rq:datatype xsd:string;
	d2rq:column "SEZ1.TIT_SEZ1";
.	
map:LegameTitoloSezione a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Sezione;
	d2rq:property crm:P102_has_title;
	d2rq:refersToClassMap map:TitoloSezione;
	d2rq:join "SEZ1.ID_SEZ1 = SEZ1.ID_SEZ1";
.

map:SezioneTesto a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "SEZ/TESTO/@@SEZ1.ID_SEZ1|urlify@@";
	d2rq:condition "SEZ1.TESTO <> ''";
	d2rq:class crm:E62_String;
.
map:LabelSezioneTesto a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:SezioneTesto;
	d2rq:property rdfs:label;
	d2rq:column "SEZ1.TESTO";
.
map:LegameSezioneTesto a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:Sezione;
	d2rq:property crm:P3_has_note;
	d2rq:refersToClassMap map:SezioneTesto;
	d2rq:join "SEZ1.TESTO = SEZ1.TESTO";
	d2rq:condition "SEZ1.TESTO <> ''";
.